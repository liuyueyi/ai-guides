import{_ as s,V as a,W as t,X as p}from"./framework-2236aa4f.js";const e="/ai-guides/imgs/column/springai/A07-0.webp",o="/ai-guides/imgs/column/springai/A07-1.webp",c="/ai-guides/imgs/column/springai/A07-doubao.webp",n="/ai-guides/imgs/column/springai/A07-yuanbao.webp",l="/ai-guides/imgs/column/springai/A07-baidu.webp",i="/ai-guides/imgs/column/springai/A07-chatgpt.webp",u={},k=p('<h1 id="spring-aiä¸­çš„å¤šè½®å¯¹è¯è‰ºæœ¯-è®©å¤§æ¨¡å‹ä¸»åŠ¨æé—®è·å–æ˜ç¡®éœ€æ±‚" tabindex="-1"><a class="header-anchor" href="#spring-aiä¸­çš„å¤šè½®å¯¹è¯è‰ºæœ¯-è®©å¤§æ¨¡å‹ä¸»åŠ¨æé—®è·å–æ˜ç¡®éœ€æ±‚" aria-hidden="true">#</a> Spring AIä¸­çš„å¤šè½®å¯¹è¯è‰ºæœ¯ï¼šè®©å¤§æ¨¡å‹ä¸»åŠ¨æé—®è·å–æ˜ç¡®éœ€æ±‚</h1><p>åœ¨æ—¥å¸¸æˆ‘ä»¬ä¸å¤§æ¨¡å‹äº¤äº’çš„è¿‡ç¨‹ä¸­ï¼Œé€šå¸¸æ˜¯æˆ‘è¾“å…¥ä¸€ä¸ªé—®é¢˜æˆ–è€…åœºæ™¯è¦æ±‚ï¼Œç„¶åå¤§æ¨¡å‹åŸºäºæˆ‘ç»™å‡ºçš„ä¿¡æ¯è¿›è¡Œç”Ÿæˆå†…å®¹ã€‚è¿™ç§æ–¹å¼å¾ˆå®¹æ˜“å‡ºç°ä¸€ä¸ªç­”éæ‰€é—®çš„åœºæ™¯ï¼ˆå¥½åƒå¤§æ¨¡å‹å¹¶ä¸èƒ½æ€»æ˜¯å›ç­”åˆ°æˆ‘çš„å¿ƒè¶´ä¸ŠğŸ¤£ï¼‰</p><p>é‚£ä¹ˆæœ‰ä»€ä¹ˆå¥½çš„è§£å†³åŠæ³•å—ï¼Ÿ</p><p>ç†Ÿç»ƒè°ƒæ•™å¤§æ¨¡å‹çš„å°ä¼™ä¼´ï¼Œå¯èƒ½æ—©å°±æœ‰è‡ªå·±çš„ä¸€å¥—æ ‡å‡†æµç¨‹äº† -- é€šè¿‡å¤šæ¬¡ä¸å¤§æ¨¡å‹ä¹‹é—´çš„å¤šæ¬¡é—®è¯¢å›ç­”ï¼Œè®©å¤§æ¨¡å‹èƒ½æ›´æ¸…æ™°çš„çŸ¥é“è‡ªå·±çš„è¯‰æ±‚</p><p>é‚£ä¹ˆå¦‚ä½•è®©AIä¸»åŠ¨é—®è¯¢ç”¨æˆ·æ¥è·å–æ›´ç²¾ç¡®çš„ä¿¡æ¯å‘¢ï¼Ÿå¦‚æœæˆ‘å¼€å‘çš„å¤§æ¨¡å‹åº”ç”¨ï¼Œå¸Œæœ›é›†æˆè¿™æ ·çš„èƒ½åŠ›ï¼Œåˆå¯ä»¥æ€ä¹ˆå®ç°å‘¢ï¼Ÿ</p><p>æ¥ä¸‹æ¥æˆ‘ä»¬çœ‹çœ‹ï¼ŒSpringAIä¸­ï¼Œå¦‚ä½•é€šè¿‡å·§å¦™çš„å¤šè½®å¯¹è¯è‰ºæœ¯ï¼Œæ¥å®ç°è®©å¤§æ¨¡å‹ä¸»åŠ¨æé—®è·å–æ˜ç¡®éœ€æ±‚</p><h2 id="ä¸€ã€æ–¹æ¡ˆè®¾è®¡" tabindex="-1"><a class="header-anchor" href="#ä¸€ã€æ–¹æ¡ˆè®¾è®¡" aria-hidden="true">#</a> ä¸€ã€æ–¹æ¡ˆè®¾è®¡</h2><h3 id="_1-1-æ ¸å¿ƒé—®é¢˜" tabindex="-1"><a class="header-anchor" href="#_1-1-æ ¸å¿ƒé—®é¢˜" aria-hidden="true">#</a> 1.1 æ ¸å¿ƒé—®é¢˜</h3><p>åœ¨æˆ‘ä»¬è¿™ä¸ªåœºæ™¯ä¸­ï¼Œæ ¸å¿ƒçš„é—®é¢˜ç‚¹åœ¨äº <strong>å¦‚ä½•è®©å¤§æ¨¡å‹åœ¨é¢å¯¹æ¨¡ç³Šéœ€æ±‚æ—¶ï¼Œèƒ½å¤Ÿä¸»åŠ¨å‘èµ·è¯¢é—®ï¼Œè·å–æ›´è¯¦ç»†çš„ä¿¡æ¯ï¼Œä»è€Œæä¾›æ›´ç²¾å‡†çš„å“åº”ã€‚</strong></p><p>å¸¸è§çš„å®ç°ä¸­ï¼Œå­˜åœ¨çš„é—®é¢˜å¦‚ä¸‹ï¼š</p><ul><li>å•æ¬¡äº¤äº’è¯•å›¾è§£å†³å¤æ‚é—®é¢˜</li><li>å¯¹æ¨¡ç³Šè¾“å…¥ä¸åšå¤„ç†ç›´æ¥å“åº”</li><li>ç¼ºå°‘å¤šè½®å¯¹è¯çš„çŠ¶æ€ç®¡ç†</li></ul><p>è¿™äº›é—®é¢˜çš„æ ¹æœ¬åŸå› åœ¨äºæ²¡æœ‰å»ºç«‹èµ·AIä¸ç”¨æˆ·ä¹‹é—´çš„æœ‰æ•ˆåé¦ˆå¾ªç¯ï¼Œå¯¼è‡´å¤§æ¨¡å‹æ— æ³•è·å–è¶³å¤Ÿçš„ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼Œä½†æ˜¯å¯¹äºå¤§æ¨¡å‹è€Œè¨€ï¼Œå“åº”å†…å®¹æ˜¯å¯¹å®ƒçš„ä¸€ä¸ªéå¸¸é‡è¦çš„è€ƒé‡æŒ‡æ ‡ï¼Œæ‰€ä»¥å°±å¾ˆå®¹å‡ºç°å¤§æ¨¡å‹<code>è¯è¯´å…«é“</code> <code>ç­”éæ‰€é—®</code>ç­‰å¹»è§‰é‚£é—®é¢˜</p><h3 id="_1-2-ä¸»åŠ¨é—®è¯¢è®¾è®¡" tabindex="-1"><a class="header-anchor" href="#_1-2-ä¸»åŠ¨é—®è¯¢è®¾è®¡" aria-hidden="true">#</a> 1.2 ä¸»åŠ¨é—®è¯¢è®¾è®¡</h3><blockquote><p>å¥½çš„è®¾è®¡åº”è¯¥ä¸»åŠ¨é€‚åº”ç”¨æˆ·ï¼Œè€Œä¸æ˜¯è®©ç”¨æˆ·é€‚åº”è®¾è®¡ã€‚</p></blockquote><p>å¾ˆå¤šäººè®¤ä¸ºå¤§æ¨¡å‹åªèƒ½è¢«åŠ¨æ¥æ”¶è¾“å…¥ï¼Œå®é™…ä¸Š <code>Spring AI</code> æä¾›äº† <code>AskUserQuestionTool</code> è¿™ä¸ªå¼ºå¤§çš„å·¥å…·ï¼Œè®©AIèƒ½å¤Ÿä¸»åŠ¨å‘ç”¨æˆ·æå‡ºé—®é¢˜ã€‚</p><p>å®ƒæ˜¯é€šè¿‡ä»€ä¹ˆå®ç°çš„å‘¢ï¼Ÿ</p><figure><img src="'+e+`" alt="äº¤äº’æ¼”ç¤º" tabindex="0" loading="lazy"><figcaption>äº¤äº’æ¼”ç¤º</figcaption></figure><ul><li>é€šè¿‡Function Callbackæ¥å®ç°ï¼Œå°†<code>AskUserQuestionTool</code>æ³¨å†Œä¸ºå¤§æ¨¡å‹å¯å›è°ƒä½¿ç”¨çš„å·¥å…·ï¼Œé€šè¿‡è¿™ä¸ªå·¥å…·æ¥å®ç°å¤šè½®é—®è¯¢åº”ç­”</li></ul><p>ä¸‹é¢æ˜¯è¿™ä¸ªå·¥å…·çš„æ ¸å¿ƒå®šä¹‰:</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AskUserQuestionTool</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Tool</span><span class="token punctuation">(</span>
        name <span class="token operator">=</span> <span class="token string">&quot;AskUserQuestionTool&quot;</span><span class="token punctuation">,</span>
        description <span class="token operator">=</span> <span class="token string">&quot;Use this tool when you need to ask the user questions during execution. This allows you to:\\n1. Gather user preferences or requirements\\n2. Clarify ambiguous instructions\\n3. Get decisions on implementation choices as you work\\n4. Offer choices to the user about what direction to take.\\n\\nUsage notes:\\n- Users will always be able to select \\&quot;Other\\&quot; to provide custom text input\\n- Use multiSelect: true to allow multiple answers to be selected for a question\\n- If you recommend a specific option, make that the first option in the list and add \\&quot;(Recommended)\\&quot; at the end of the label\\n&quot;</span>
    <span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">askUserQuestion</span><span class="token punctuation">(</span><span class="token annotation punctuation">@ToolParam</span><span class="token punctuation">(</span>description <span class="token operator">=</span> <span class="token string">&quot;Questions to ask the user (1-4 questions)&quot;</span><span class="token punctuation">)</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Question</span><span class="token punctuation">&gt;</span></span> questions<span class="token punctuation">,</span> <span class="token annotation punctuation">@ToolParam</span><span class="token punctuation">(</span>description <span class="token operator">=</span> <span class="token string">&quot;User answers collected by the permission component&quot;</span><span class="token punctuation">,</span>required <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> answers<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">validateQuestions</span><span class="token punctuation">(</span>questions<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// çœç•¥...</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>é‡ç‚¹çœ‹ä¸€ä¸‹è¿™ä¸ªå·¥å…·çš„æè¿°ï¼Œå°†å…¶ç¿»è¯‘æˆä¸­æ–‡ï¼Œå†…å®¹å¦‚ä¸‹</p><div class="language-txt line-numbers-mode" data-ext="txt"><pre class="language-txt"><code>åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­éœ€è¦å‘ç”¨æˆ·æé—®æ—¶ï¼Œè¯·ä½¿ç”¨æ­¤å·¥å…·ã€‚è¿™ä½¿æ‚¨èƒ½å¤Ÿï¼š
1. æ”¶é›†ç”¨æˆ·åå¥½æˆ–éœ€æ±‚
2. æ˜ç¡®å«ç³Šä¸æ¸…çš„æŒ‡ä»¤
3. åœ¨å·¥ä½œä¸­å°±å®æ–½é€‰æ‹©åšå‡ºå†³ç­–
4. å‘ç”¨æˆ·æä¾›é€‰æ‹©ï¼Œè®©ä»–ä»¬å†³å®šè¦é‡‡å–çš„æ–¹å‘ã€‚

ä½¿ç”¨é¡»çŸ¥ï¼š
- ç”¨æˆ·å§‹ç»ˆå¯ä»¥é€‰æ‹©â€œå…¶ä»–â€æ¥æä¾›è‡ªå®šä¹‰æ–‡æœ¬è¾“å…¥
- ä½¿ç”¨multiSelect: trueï¼Œå…è®¸ä¸€ä¸ªé—®é¢˜æœ‰å¤šä¸ªç­”æ¡ˆé€‰é¡¹
- å¦‚æœä½ æ¨èäº†ä¸€ä¸ªç‰¹å®šé€‰é¡¹ï¼Œè¯·å°†å…¶ä½œä¸ºåˆ—è¡¨ä¸­çš„ç¬¬ä¸€ä¸ªé€‰é¡¹ï¼Œå¹¶åœ¨æ ‡ç­¾æœ«å°¾åŠ ä¸Šâ€œï¼ˆæ¨èï¼‰â€
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨è¿™ä¸ªå·¥å…·ç±»ä¸­ï¼Œé€šè¿‡å·§å¦™çš„è®¾è®¡ï¼Œå‘Šè¯‰å¤§æ¨¡å‹åœ¨å…·ä½“å“åº”ä¹‹å‰ï¼Œå¯ä»¥å…ˆè¿›è¡Œç”¨æˆ·é—®è¯¢</p><ul><li>å¤§æ¨¡å‹å°†éœ€è¦é—®è¯¢çš„å†…å®¹ï¼Œè½¬æ¢ä¸ºç»“æ„åŒ–çš„ <code>List&lt;Question&gt;</code></li><li>é€šè¿‡è®¾è®¡ä¸€ä¸ª<code>QuestionHandler</code>æ¥å¤„ç†å…·ä½“çš„ç”¨æˆ·é—®ç­”äº¤äº’æµç¨‹ï¼Œé€šè¿‡è´£ä»»åˆ†ç¦»çš„è®¾è®¡æ€æƒ³ï¼ŒAIè´Ÿè´£å†³å®šä½•æ—¶æé—®ï¼Œå…·ä½“çš„UIäº¤äº’ç”±å¼€å‘è€…è‡ªå®šä¹‰ã€‚ä½ å¯ä»¥å°†å…¶é€‚é…åˆ°Webç•Œé¢ã€ç§»åŠ¨ç«¯æˆ–ä»»ä½•å…¶ä»–å¹³å°ã€‚</li></ul><p>å› æ­¤å…·ä½“çš„é—®è¯¢åº”ç­”æ–¹å¼ï¼Œå®Œå…¨æ˜¯ç”±åº”ç”¨æ–¹ï¼ˆå³å¼€å‘è€…ï¼‰æ¥æ§åˆ¶çš„</p><p>æ¥ä¸‹æ¥æˆ‘ä»¬è¿›å…¥å®æˆ˜æ¼”ç»ƒï¼Œçœ‹çœ‹å¦‚ä½•å®ç°è¿™æ ·çš„ä¸€ä¸ªå¤šè½®é—®è¯¢</p><h2 id="äºŒã€é¡¹ç›®åˆ›å»º" tabindex="-1"><a class="header-anchor" href="#äºŒã€é¡¹ç›®åˆ›å»º" aria-hidden="true">#</a> äºŒã€é¡¹ç›®åˆ›å»º</h2><h3 id="_2-1-åŸºç¡€ç¯å¢ƒè¦æ±‚" tabindex="-1"><a class="header-anchor" href="#_2-1-åŸºç¡€ç¯å¢ƒè¦æ±‚" aria-hidden="true">#</a> 2.1 åŸºç¡€ç¯å¢ƒè¦æ±‚</h3><p>è¦ä½“éªŒSpringAIçš„é—®è¯¢æœºåˆ¶ï¼Œç›®å‰éœ€è¦å‡çº§åˆ°SpringAI 2.xç‰ˆæœ¬ï¼ŒåŒæ—¶æˆ‘ä»¬çš„SpringBootä¹Ÿå¯ä»¥å‡çº§åˆ°4.x</p><ul><li>SpringAI: 2.0.0-M2</li><li>SpringBoot: 4.0.1</li><li>JDK21/17ï¼šè¿™ä¸¤ç‰ˆæœ¬éƒ½å¯ä»¥</li></ul><p>é™¤äº†è¿™å‡ ä¸ªåŸºæœ¬ä¾èµ–ä¹‹å¤–ï¼Œæˆ‘ä»¬å¯ä»¥é€‰æ‹©ä¸€ä¸ªæ”¯æŒFunction Toolçš„å¤§æ¨¡å‹æ¥ä½œä¸ºè¿™ä¸ªå®ç°çš„å¤§è„‘ä¸­æ¢</p><p>æˆ‘ä»¬è¿™é‡Œé€‰æ‹©æ™ºè°±çš„å¤§æ¨¡å‹<code>GLM-4.5-Flash</code> ï¼ˆåŸå› å°±æ˜¯å› ä¸ºå®ƒå…è´¹ï¼Œä¸”æ•ˆæœè¿˜è¡Œï¼Œå¯¹æ‰€æœ‰æƒ³ä½“éªŒçš„å°ä¼™ä¼´æ²¡æœ‰ä»»ä½•é¢å¤–æˆæœ¬æŠ•å…¥ï¼‰</p><h3 id="_2-2-é¡¹ç›®åˆ›å»º" tabindex="-1"><a class="header-anchor" href="#_2-2-é¡¹ç›®åˆ›å»º" aria-hidden="true">#</a> 2.2 é¡¹ç›®åˆ›å»º</h3><p>æ¥ä¸‹æ¥æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªSpringAIåº”ç”¨ï¼Œå¯¹äºä¸€ä¸ªæ ‡å‡†çš„SpringAIåº”ç”¨ï¼Œåœ¨<code>pom.xml</code>é…ç½®ä¸­ï¼Œä½ ä¼šçœ‹åˆ°ä¸‹é¢è¿™äº›åŸºç¡€ç‰ˆæœ¬æŒ‡å®šï¼Œè¿™ä¸ªä¹Ÿæ²¡ä»€ä¹ˆå¥½è¯´çš„</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>parent</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-parent<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>4.0.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>relativePath</span> <span class="token punctuation">/&gt;</span></span> 
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>parent</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>properties</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>maven.compiler.source</span><span class="token punctuation">&gt;</span></span>21<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>maven.compiler.source</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>maven.compiler.target</span><span class="token punctuation">&gt;</span></span>21<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>maven.compiler.target</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>project.build.sourceEncoding</span><span class="token punctuation">&gt;</span></span>UTF-8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>project.build.sourceEncoding</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>spring-ai.version</span><span class="token punctuation">&gt;</span></span>2.0.0-M2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>spring-ai.version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>properties</span><span class="token punctuation">&gt;</span></span>


<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencyManagement</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.ai<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-ai-bom<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>\${spring-ai.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>type</span><span class="token punctuation">&gt;</span></span>pom<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>type</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>import<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencyManagement</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>build</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugins</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugin</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-maven-plugin<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugin</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugins</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>build</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>repositories</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>repository</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">&gt;</span></span>spring-snapshots<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>Spring Snapshots<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url</span><span class="token punctuation">&gt;</span></span>https://repo.spring.io/snapshot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>releases</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>enabled</span><span class="token punctuation">&gt;</span></span>false<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>enabled</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>releases</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>repository</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>repository</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>Central Portal Snapshots<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">&gt;</span></span>central-portal-snapshots<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url</span><span class="token punctuation">&gt;</span></span>https://central.sonatype.com/repository/maven-snapshots/<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>releases</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>enabled</span><span class="token punctuation">&gt;</span></span>false<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>enabled</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>releases</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>snapshots</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>enabled</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>enabled</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>snapshots</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>repository</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>repositories</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ¥ä¸‹æ¥é‡ç‚¹çœ‹ä¸€ä¸‹æˆ‘ä»¬è¿™ä¸ªé¡¹ç›®æ‰€ç”¨åˆ°çš„å‡ ä¸ªæ ¸å¿ƒä¾èµ–</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springaicommunity<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-ai-agent-utils<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>0.4.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.ai<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-ai-starter-model-zhipuai<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>spring-ai-agent-utils: è¿™ä¸ªå°±æ˜¯SpringAIè¿›è¡Œagentå¼€å‘çš„å…³é”®ä¾èµ–åŒ…</li><li>spring-ai-starter-model-zhipuai: è¿™ä¸ªæ˜¯æ™ºè°±å¤§æ¨¡å‹è¿›è¡Œäº¤äº’çš„ä¾èµ–åŒ…</li></ul><h3 id="_2-3-é¡¹ç›®é…ç½®" tabindex="-1"><a class="header-anchor" href="#_2-3-é¡¹ç›®é…ç½®" aria-hidden="true">#</a> 2.3 é¡¹ç›®é…ç½®</h3><p>ä¾èµ–æå®šä¹‹åï¼Œæ¥ä¸‹æ¥å°±æ˜¯åœ¨é…ç½®æ–‡ä»¶ä¸­ï¼Œé…ç½®LLMè®¿é—®çš„ç›¸å…³ä¿¡æ¯ã€ä»¥åŠagentç›¸å…³é…ç½®å‚æ•°ï¼Œå¯¹åº”çš„é…ç½®æ–‡ä»¶ <code>resources/application.yml</code></p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">ai</span><span class="token punctuation">:</span>
    <span class="token key atrule">zhipuai</span><span class="token punctuation">:</span>
      <span class="token comment"># api-key ä½¿ç”¨ä½ è‡ªå·±ç”³è¯·çš„è¿›è¡Œæ›¿æ¢ï¼›å¦‚æœä¸ºäº†å®‰å…¨è€ƒè™‘ï¼Œå¯ä»¥é€šè¿‡å¯åŠ¨å‚æ•°è¿›è¡Œè®¾ç½®</span>
      <span class="token key atrule">api-key</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span>zhipuai<span class="token punctuation">-</span>api<span class="token punctuation">-</span>key<span class="token punctuation">}</span>
      <span class="token key atrule">chat</span><span class="token punctuation">:</span> <span class="token comment"># èŠå¤©æ¨¡å‹</span>
        <span class="token key atrule">options</span><span class="token punctuation">:</span>
          <span class="token key atrule">model</span><span class="token punctuation">:</span> GLM<span class="token punctuation">-</span>4.7<span class="token punctuation">-</span>Flash
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="ä¸‰ã€æ ¸å¿ƒå®ç°" tabindex="-1"><a class="header-anchor" href="#ä¸‰ã€æ ¸å¿ƒå®ç°" aria-hidden="true">#</a> ä¸‰ã€æ ¸å¿ƒå®ç°</h2><p>æ¥ä¸‹æ¥æˆ‘ä»¬è¿›è¡Œå¿«é€Ÿä½“éªŒï¼Œé¦–å…ˆä¸ºäº†æ›´å¥½çš„è§‚å¯Ÿåº”ç”¨ä¸å¤§æ¨¡å‹ä¹‹é—´çš„äº¤äº’ï¼Œæˆ‘ä»¬å®ç°ä¸€ä¸ª<code>LoggingAdvisor</code></p><h3 id="_3-1-äº¤äº’æ—¥å¿—æ‰“å°-myloggingadvisor" tabindex="-1"><a class="header-anchor" href="#_3-1-äº¤äº’æ—¥å¿—æ‰“å°-myloggingadvisor" aria-hidden="true">#</a> 3.1 äº¤äº’æ—¥å¿—æ‰“å°ï¼š MyLoggingAdvisor</h3><blockquote><p>è¯´æ˜ï¼šè¿™ä¸ªå®ç°éå¿…éœ€ï¼Œä¸æ„Ÿå…´è¶£çš„ç›´æ¥è·³è¿‡</p></blockquote><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyLoggingAdvisor</span> <span class="token keyword">implements</span> <span class="token class-name">BaseAdvisor</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token keyword">int</span> order<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">boolean</span> showSystemMessage<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">boolean</span> showAvailableTools<span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token class-name">AtomicInteger</span> cnt <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AtomicInteger</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token class-name">MyLoggingAdvisor</span><span class="token punctuation">(</span><span class="token keyword">int</span> order<span class="token punctuation">,</span> <span class="token keyword">boolean</span> showSystemMessage<span class="token punctuation">,</span> <span class="token keyword">boolean</span> showAvailableTools<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>order <span class="token operator">=</span> order<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>showSystemMessage <span class="token operator">=</span> showSystemMessage<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>showAvailableTools <span class="token operator">=</span> showAvailableTools<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getOrder</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>order<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">ChatClientRequest</span> <span class="token function">before</span><span class="token punctuation">(</span><span class="token class-name">ChatClientRequest</span> chatClientRequest<span class="token punctuation">,</span> <span class="token class-name">AdvisorChain</span> advisorChain<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;======================= ç¬¬ &quot;</span> <span class="token operator">+</span> cnt<span class="token punctuation">.</span><span class="token function">getAndAdd</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot; è½® ====================================&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">StringBuilder</span> sb <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StringBuilder</span><span class="token punctuation">(</span><span class="token string">&quot;\\nUSER: &quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>showSystemMessage <span class="token operator">&amp;&amp;</span> chatClientRequest<span class="token punctuation">.</span><span class="token function">prompt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getSystemMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            sb<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;\\n - SYSTEM: &quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token function">first</span><span class="token punctuation">(</span>chatClientRequest<span class="token punctuation">.</span><span class="token function">prompt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getSystemMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getText</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">300</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>showAvailableTools<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">Object</span> tools <span class="token operator">=</span> <span class="token string">&quot;No Tools&quot;</span><span class="token punctuation">;</span>

            <span class="token keyword">if</span> <span class="token punctuation">(</span>chatClientRequest<span class="token punctuation">.</span><span class="token function">prompt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getOptions</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">instanceof</span> <span class="token class-name">ToolCallingChatOptions</span> toolOptions<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                tools <span class="token operator">=</span> toolOptions<span class="token punctuation">.</span><span class="token function">getToolCallbacks</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>tc <span class="token operator">-&gt;</span> tc<span class="token punctuation">.</span><span class="token function">getToolDefinition</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">name</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            sb<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;\\n - TOOLS: &quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token class-name">ModelOptionsUtils</span><span class="token punctuation">.</span><span class="token function">toJsonString</span><span class="token punctuation">(</span>tools<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token class-name">Message</span> lastMessage <span class="token operator">=</span> chatClientRequest<span class="token punctuation">.</span><span class="token function">prompt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getLastUserOrToolResponseMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">if</span> <span class="token punctuation">(</span>lastMessage<span class="token punctuation">.</span><span class="token function">getMessageType</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token class-name">MessageType</span><span class="token punctuation">.</span><span class="token constant">TOOL</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">ToolResponseMessage</span> toolResponseMessage <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">ToolResponseMessage</span><span class="token punctuation">)</span> lastMessage<span class="token punctuation">;</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> toolResponse <span class="token operator">:</span> toolResponseMessage<span class="token punctuation">.</span><span class="token function">getResponses</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">var</span> tr <span class="token operator">=</span> toolResponse<span class="token punctuation">.</span><span class="token function">name</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;: &quot;</span> <span class="token operator">+</span> <span class="token function">first</span><span class="token punctuation">(</span>toolResponse<span class="token punctuation">.</span><span class="token function">responseData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                sb<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;\\n - TOOL-RESPONSE: &quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>tr<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>lastMessage<span class="token punctuation">.</span><span class="token function">getMessageType</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token class-name">MessageType</span><span class="token punctuation">.</span><span class="token constant">USER</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">StringUtils</span><span class="token punctuation">.</span><span class="token function">hasText</span><span class="token punctuation">(</span>lastMessage<span class="token punctuation">.</span><span class="token function">getText</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                sb<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;\\n - TEXT: &quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token function">first</span><span class="token punctuation">(</span>lastMessage<span class="token punctuation">.</span><span class="token function">getText</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;before: &quot;</span> <span class="token operator">+</span> sb<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> chatClientRequest<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">ChatClientResponse</span> <span class="token function">after</span><span class="token punctuation">(</span><span class="token class-name">ChatClientResponse</span> chatClientResponse<span class="token punctuation">,</span> <span class="token class-name">AdvisorChain</span> advisorChain<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">StringBuilder</span> sb <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StringBuilder</span><span class="token punctuation">(</span><span class="token string">&quot;\\nASSISTANT: &quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">if</span> <span class="token punctuation">(</span>chatClientResponse<span class="token punctuation">.</span><span class="token function">chatResponse</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> chatClientResponse<span class="token punctuation">.</span><span class="token function">chatResponse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getResults</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            sb<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot; No chat response &quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;after: &quot;</span> <span class="token operator">+</span> sb<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> chatClientResponse<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> generation <span class="token operator">:</span> chatClientResponse<span class="token punctuation">.</span><span class="token function">chatResponse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getResults</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">var</span> message <span class="token operator">=</span> generation<span class="token punctuation">.</span><span class="token function">getOutput</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>message<span class="token punctuation">.</span><span class="token function">getToolCalls</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> toolCall <span class="token operator">:</span> message<span class="token punctuation">.</span><span class="token function">getToolCalls</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    sb<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;\\n - TOOL-CALL: &quot;</span><span class="token punctuation">)</span>
                            <span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>toolCall<span class="token punctuation">.</span><span class="token function">name</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                            <span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot; (&quot;</span><span class="token punctuation">)</span>
                            <span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>toolCall<span class="token punctuation">.</span><span class="token function">arguments</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                            <span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;)&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>

            <span class="token keyword">if</span> <span class="token punctuation">(</span>message<span class="token punctuation">.</span><span class="token function">getText</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">StringUtils</span><span class="token punctuation">.</span><span class="token function">hasText</span><span class="token punctuation">(</span>message<span class="token punctuation">.</span><span class="token function">getText</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    sb<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;\\n - TEXT: &quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token function">first</span><span class="token punctuation">(</span>message<span class="token punctuation">.</span><span class="token function">getText</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">1200</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;after: &quot;</span> <span class="token operator">+</span> sb<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> chatClientResponse<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token class-name">String</span> <span class="token function">first</span><span class="token punctuation">(</span><span class="token class-name">String</span> text<span class="token punctuation">,</span> <span class="token keyword">int</span> n<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>text<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;=</span> n<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> text<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> text<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> n<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;...&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Builder</span> <span class="token function">builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">Builder</span> <span class="token punctuation">{</span>

        <span class="token keyword">private</span> <span class="token keyword">int</span> order <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

        <span class="token keyword">private</span> <span class="token keyword">boolean</span> showSystemMessage <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>

        <span class="token keyword">private</span> <span class="token keyword">boolean</span> showAvailableTools <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>

        <span class="token keyword">public</span> <span class="token class-name">Builder</span> <span class="token function">order</span><span class="token punctuation">(</span><span class="token keyword">int</span> order<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>order <span class="token operator">=</span> order<span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">public</span> <span class="token class-name">Builder</span> <span class="token function">showSystemMessage</span><span class="token punctuation">(</span><span class="token keyword">boolean</span> showSystemMessage<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>showSystemMessage <span class="token operator">=</span> showSystemMessage<span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">public</span> <span class="token class-name">Builder</span> <span class="token function">showAvailableTools</span><span class="token punctuation">(</span><span class="token keyword">boolean</span> showAvailableTools<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>showAvailableTools <span class="token operator">=</span> showAvailableTools<span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">public</span> <span class="token class-name">MyLoggingAdvisor</span> <span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">MyLoggingAdvisor</span> advisor <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MyLoggingAdvisor</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>order<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>showSystemMessage<span class="token punctuation">,</span>
                    <span class="token keyword">this</span><span class="token punctuation">.</span>showAvailableTools<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> advisor<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-2-å‘½ä»¤è¡Œçš„é—®è¯¢åº”ç­”å®ç°-commandlinequestionhandler" tabindex="-1"><a class="header-anchor" href="#_3-2-å‘½ä»¤è¡Œçš„é—®è¯¢åº”ç­”å®ç°-commandlinequestionhandler" aria-hidden="true">#</a> 3.2 å‘½ä»¤è¡Œçš„é—®è¯¢åº”ç­”å®ç°ï¼šCommandLineQuestionHandler</h3><p>åœ¨å‰é¢çš„è®¾è®¡ç¯‡ä¸­ä»‹ç»äº†<code>AskUserQuestionTool</code>ä¸­ï¼Œè®¾è®¡äº†ä¸€ä¸ªæ‰©å±•ç‚¹ <code>QuestionHandler</code> ç”±ä½¿ç”¨è€…æ¥å®ç°å…·ä½“çš„é—®ç­”äº¤äº’æ–¹æ¡ˆï¼Œå› æ­¤æˆ‘ä»¬å…ˆå®ç°ä¸€ä¸ªåŸºç¡€çš„åŸºäºå‘½ä»¤è¡Œçš„é—®ç­”</p><ul><li><code>CommandLineQuestionHandler</code>ï¼šå®ç°<code>QuestionHandler</code>æ¥å£ï¼Œå¤„ç†ç”¨æˆ·é—®é¢˜åˆ—è¡¨</li><li><code>handle</code>æ–¹æ³•ï¼šéå†é—®é¢˜ï¼Œæ˜¾ç¤ºé€‰é¡¹ä¾›ç”¨æˆ·é€‰æ‹©ï¼Œæ”¯æŒå•é€‰/å¤šé€‰æ¨¡å¼</li><li><code>parseResponse</code>æ–¹æ³•ï¼šè§£æç”¨æˆ·è¾“å…¥ï¼Œå°†æ•°å­—ç¼–å·è½¬æ¢ä¸ºå¯¹åº”é€‰é¡¹æ ‡ç­¾ï¼Œæˆ–ç›´æ¥è¿”å›è‡ªå®šä¹‰æ–‡æœ¬ç­”æ¡ˆ</li></ul><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * å‘½ä»¤è¡Œé—®é¢˜å¤„ç†å™¨ï¼Œå®ç° AskUserQuestionTool.QuestionHandler æ¥å£
 * ç”¨äºå¤„ç†AIå·¥å…·å‘ç”¨æˆ·æå‡ºçš„é—®é¢˜ï¼Œæ”¯æŒå•é€‰ã€å¤šé€‰å’Œè‡ªå®šä¹‰æ–‡æœ¬è¾“å…¥
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CommandLineQuestionHandler</span> <span class="token keyword">implements</span> <span class="token class-name">AskUserQuestionTool<span class="token punctuation">.</span>QuestionHandler</span> <span class="token punctuation">{</span>

    <span class="token doc-comment comment">/**
     * å¤„ç†ä¼ å…¥çš„é—®é¢˜åˆ—è¡¨ï¼Œé€ä¸ªæ˜¾ç¤ºé—®é¢˜å’Œé€‰é¡¹ï¼Œæ”¶é›†ç”¨æˆ·è¾“å…¥çš„ç­”æ¡ˆ
     *
     * <span class="token keyword">@param</span> <span class="token parameter">questions</span> éœ€è¦å¤„ç†çš„é—®é¢˜åˆ—è¡¨
     * <span class="token keyword">@return</span> åŒ…å«é—®é¢˜å’Œå¯¹åº”ç­”æ¡ˆçš„æ˜ å°„è¡¨
     */</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> <span class="token function">handle</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">AskUserQuestionTool<span class="token punctuation">.</span>Question</span><span class="token punctuation">&gt;</span></span> questions<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> answers <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">Scanner</span> scanner <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Scanner</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>in<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">AskUserQuestionTool<span class="token punctuation">.</span>Question</span> q <span class="token operator">:</span> questions<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// æ˜¾ç¤ºé—®é¢˜æ ‡é¢˜å’Œå†…å®¹</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\\n&quot;</span> <span class="token operator">+</span> q<span class="token punctuation">.</span><span class="token function">header</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;: &quot;</span> <span class="token operator">+</span> q<span class="token punctuation">.</span><span class="token function">question</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token comment">// è·å–å¹¶æ˜¾ç¤ºé€‰é¡¹</span>
            <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">AskUserQuestionTool<span class="token punctuation">.</span>Question<span class="token punctuation">.</span>Option</span><span class="token punctuation">&gt;</span></span> options <span class="token operator">=</span> q<span class="token punctuation">.</span><span class="token function">options</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> options<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">AskUserQuestionTool<span class="token punctuation">.</span>Question<span class="token punctuation">.</span>Option</span> opt <span class="token operator">=</span> options<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;  %d. %s - %s%n&quot;</span><span class="token punctuation">,</span> i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> opt<span class="token punctuation">.</span><span class="token function">label</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> opt<span class="token punctuation">.</span><span class="token function">description</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            <span class="token comment">// æ ¹æ®æ˜¯å¦ä¸ºå¤šé€‰æ˜¾ç¤ºæç¤ºä¿¡æ¯</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>q<span class="token punctuation">.</span><span class="token function">multiSelect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;  (Enter numbers separated by commas, or type custom text)&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;  (Enter a number, or type custom text)&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            <span class="token comment">// è¯»å–ç”¨æˆ·è¾“å…¥å¹¶è§£æç­”æ¡ˆ</span>
            <span class="token class-name">String</span> response <span class="token operator">=</span> scanner<span class="token punctuation">.</span><span class="token function">nextLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            answers<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>q<span class="token punctuation">.</span><span class="token function">question</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">parseResponse</span><span class="token punctuation">(</span>response<span class="token punctuation">,</span> options<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">return</span> answers<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token doc-comment comment">/**
     * è§£æç”¨æˆ·è¾“å…¥çš„å“åº”ï¼Œæ ¹æ®é€‰é¡¹ç´¢å¼•æˆ–è‡ªå®šä¹‰æ–‡æœ¬è¿”å›å¯¹åº”çš„å€¼
     *
     * <span class="token keyword">@param</span> <span class="token parameter">response</span> ç”¨æˆ·è¾“å…¥çš„åŸå§‹å­—ç¬¦ä¸²
     * <span class="token keyword">@param</span> <span class="token parameter">options</span>  å¯ç”¨çš„é€‰é¡¹åˆ—è¡¨
     * <span class="token keyword">@return</span> è§£æåçš„ç­”æ¡ˆå­—ç¬¦ä¸²
     */</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">String</span> <span class="token function">parseResponse</span><span class="token punctuation">(</span><span class="token class-name">String</span> response<span class="token punctuation">,</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">AskUserQuestionTool<span class="token punctuation">.</span>Question<span class="token punctuation">.</span>Option</span><span class="token punctuation">&gt;</span></span> options<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token comment">// å°è¯•å°†è¾“å…¥è§£æä¸ºé€‰é¡¹ç¼–å·ï¼ˆæ”¯æŒå¤šä¸ªé€‰é¡¹ï¼‰</span>
            <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> parts <span class="token operator">=</span> response<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&quot;,&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> labels <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">String</span> part <span class="token operator">:</span> parts<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">int</span> index <span class="token operator">=</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">parseInt</span><span class="token punctuation">(</span>part<span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">&gt;=</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> index <span class="token operator">&lt;</span> options<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    labels<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>options<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">label</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
            <span class="token comment">// å¦‚æœæ²¡æœ‰æ‰¾åˆ°æœ‰æ•ˆçš„é€‰é¡¹ç¼–å·ï¼Œåˆ™è¿”å›åŸå§‹è¾“å…¥ï¼›å¦åˆ™è¿”å›é€‰é¡¹æ ‡ç­¾çš„ç»„åˆ</span>
            <span class="token keyword">return</span> labels<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">?</span> response <span class="token operator">:</span> <span class="token class-name">String</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">&quot;, &quot;</span><span class="token punctuation">,</span> labels<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">NumberFormatException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// å¦‚æœè¾“å…¥ä¸æ˜¯æ•°å­—ï¼Œåˆ™å°†å…¶è§†ä¸ºè‡ªç”±æ–‡æœ¬</span>
            <span class="token keyword">return</span> response<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-3-é—®è¯¢å¯¹è¯å®ç°" tabindex="-1"><a class="header-anchor" href="#_3-3-é—®è¯¢å¯¹è¯å®ç°" aria-hidden="true">#</a> 3.3 é—®è¯¢å¯¹è¯å®ç°</h3><p>åˆ›å»ºä¸€ä¸ªç®€æ˜“èŠå¤©å®¢æˆ·ç«¯ï¼Œé…ç½®äº†ä¸‰ä¸ªAdvisorï¼šå·¥å…·è°ƒç”¨é¡¾é—®ã€æ¶ˆæ¯è®°å¿†é¡¾é—®å’Œè‡ªå®šä¹‰æ—¥å¿—é¡¾é—®ï¼ˆéšè—å¯ç”¨å·¥å…·å’Œç³»ç»Ÿæ¶ˆæ¯ï¼‰ã€‚</p><p>ç„¶åå¯åŠ¨ä¸€ä¸ªå‘½ä»¤è¡Œå¾ªç¯ï¼Œç”¨æˆ·è¾“å…¥é—®é¢˜åé€šè¿‡èŠå¤©å®¢æˆ·ç«¯å¤„ç†å¹¶è¾“å‡ºAIåŠ©æ‰‹çš„å›ç­”</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Bean</span>
<span class="token class-name">CommandLineRunner</span> <span class="token function">commandLineRunner</span><span class="token punctuation">(</span><span class="token class-name">ChatClient<span class="token punctuation">.</span>Builder</span> chatClientBuilder<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> args <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">// æ„å»ºChatClientå®ä¾‹ï¼Œé…ç½®æ‰€éœ€çš„å·¥å…·å’Œé¡¾é—®</span>
        <span class="token class-name">ChatClient</span> chatClient <span class="token operator">=</span> chatClientBuilder
                <span class="token comment">// è®¾ç½®é»˜è®¤å·¥å…·ï¼Œè¿™é‡Œä½¿ç”¨AskUserQuestionToolï¼Œå®ƒå…è®¸AIå‘ç”¨æˆ·æé—®</span>
                <span class="token punctuation">.</span><span class="token function">defaultTools</span><span class="token punctuation">(</span><span class="token class-name">AskUserQuestionTool</span><span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                        <span class="token comment">// ä½¿ç”¨å‘½ä»¤è¡Œé—®é¢˜å¤„ç†å™¨æ¥å¤„ç†AIå‘ç”¨æˆ·æå‡ºçš„é—®é¢˜</span>
                        <span class="token punctuation">.</span><span class="token function">questionHandler</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">CommandLineQuestionHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                        <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

                <span class="token comment">// é…ç½®é»˜è®¤çš„é¡¾é—®ï¼ˆæ‹¦æˆªå™¨ï¼‰ï¼ŒæŒ‰é¡ºåºæ‰§è¡Œ</span>
                <span class="token punctuation">.</span><span class="token function">defaultAdvisors</span><span class="token punctuation">(</span>
                        <span class="token comment">// å·¥å…·è°ƒç”¨é¡¾é—®ï¼šå¤„ç†å·¥å…·è°ƒç”¨é€»è¾‘</span>
                        <span class="token class-name">ToolCallAdvisor</span><span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">conversationHistoryEnabled</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                        
                        <span class="token comment">// æ¶ˆæ¯è®°å¿†é¡¾é—®ï¼šç»´æŠ¤å¯¹è¯å†å²ï¼Œä½¿ç”¨æ¶ˆæ¯çª—å£èŠå¤©è®°å¿†</span>
                        <span class="token comment">// ä½äºå·¥å…·è°ƒç”¨é¡¾é—®ä¹‹åï¼Œä»¥ç¡®ä¿èƒ½å¤Ÿè®°ä½å·¥å…·è°ƒç”¨ç»“æœ</span>
                        <span class="token class-name">MessageChatMemoryAdvisor</span><span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span>
                            <span class="token class-name">MessageWindowChatMemory</span><span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                                <span class="token punctuation">.</span><span class="token function">maxMessages</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">)</span>  <span class="token comment">// æœ€å¤šä¿å­˜500æ¡æ¶ˆæ¯</span>
                                <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                        <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                        
                        <span class="token comment">// è‡ªå®šä¹‰æ—¥å¿—é¡¾é—®ï¼šè®°å½•å¯¹è¯è¿‡ç¨‹ï¼Œå¯æ§åˆ¶æ˜¯å¦æ˜¾ç¤ºå¯ç”¨å·¥å…·å’Œç³»ç»Ÿæ¶ˆæ¯</span>
                        <span class="token class-name">MyLoggingAdvisor</span><span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                                <span class="token punctuation">.</span><span class="token function">showAvailableTools</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>   <span class="token comment">// æ˜¾ç¤ºå¯ç”¨å·¥å…·åˆ—è¡¨</span>
                                <span class="token punctuation">.</span><span class="token function">showSystemMessage</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>    <span class="token comment">// æ˜¾ç¤ºç³»ç»Ÿæ¶ˆæ¯</span>
                                <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// å¯åŠ¨èŠå¤©å¾ªç¯çš„æç¤ºä¿¡æ¯</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\\nI am your assistant.\\n&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// ä½¿ç”¨try-with-resourcesç¡®ä¿Scannerèµ„æºå¾—åˆ°æ­£ç¡®é‡Šæ”¾</span>
        <span class="token keyword">try</span> <span class="token punctuation">(</span><span class="token class-name">Scanner</span> scanner <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Scanner</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>in<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// æ— é™å¾ªç¯ï¼ŒæŒç»­æ¥æ”¶ç”¨æˆ·è¾“å…¥å¹¶è¿”å›AIå›å¤</span>
            <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;\\n$-&gt;USER: &quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// æç¤ºç”¨æˆ·è¾“å…¥</span>
                
                <span class="token comment">// è·å–ç”¨æˆ·è¾“å…¥ï¼Œé€šè¿‡chatClientå‘é€è¯·æ±‚ï¼ŒæŒ‡å®šå¯¹è¯IDï¼Œå¹¶è¾“å‡ºAIå›å¤</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\\n$-&gt;ASSISTANT: &quot;</span> <span class="token operator">+</span> 
                        chatClient<span class="token punctuation">.</span><span class="token function">prompt</span><span class="token punctuation">(</span>scanner<span class="token punctuation">.</span><span class="token function">nextLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment">// å‘é€ç”¨æˆ·è¾“å…¥åˆ°AI</span>
                                <span class="token punctuation">.</span><span class="token function">advisors</span><span class="token punctuation">(</span>a <span class="token operator">-&gt;</span> a<span class="token punctuation">.</span><span class="token function">param</span><span class="token punctuation">(</span><span class="token class-name">ChatMemory</span><span class="token punctuation">.</span><span class="token constant">CONVERSATION_ID</span><span class="token punctuation">,</span> <span class="token string">&quot;113331&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment">// è®¾ç½®å¯¹è¯IDä»¥ç»´æŠ¤ä¸Šä¸‹æ–‡</span>
                                <span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">content</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// æ‰§è¡Œè°ƒç”¨å¹¶è·å–AIå›å¤å†…å®¹</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-4-æµ‹è¯•éªŒè¯" tabindex="-1"><a class="header-anchor" href="#_3-4-æµ‹è¯•éªŒè¯" aria-hidden="true">#</a> 3.4 æµ‹è¯•éªŒè¯</h3><p>ç›´æ¥å¯åŠ¨é¡¹ç›®ï¼Œç„¶åå†æ§åˆ¶å°ä¸­è¾“å…¥æˆ‘çš„åŸå§‹è¯‰æ±‚</p><figure><img src="`+o+`" alt="äº¤äº’æ¼”ç¤º" tabindex="0" loading="lazy"><figcaption>äº¤äº’æ¼”ç¤º</figcaption></figure><p>ä¸‹é¢æ˜¯å®Œæ•´çš„æ–‡å­—ç‰ˆæœ¬è¾“å‡ºå†…å®¹</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>I am your assistant.


$-<span class="token operator">&gt;</span><span class="token environment constant">USER</span><span class="token builtin class-name">:</span> æˆ‘å‡†å¤‡è®¾è®¡ä¸€å¼ é”¦é²¤ä¸»é¢˜çš„å¾®ä¿¡çº¢åŒ…å°é¢
<span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">=</span> ç¬¬ <span class="token number">1</span> è½® <span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span>
before: 
<span class="token environment constant">USER</span><span class="token builtin class-name">:</span> 
 - SYSTEM: 
 - TOOLS: <span class="token punctuation">[</span><span class="token string">&quot;AskUserQuestionTool&quot;</span><span class="token punctuation">]</span>
 - TEXT: æˆ‘å‡†å¤‡è®¾è®¡ä¸€å¼ é”¦é²¤ä¸»é¢˜çš„å¾®ä¿¡çº¢åŒ…å°é¢
after: 
ASSISTANT: 
 - TOOL-CALL: AskUserQuestionTool <span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">&quot;questions&quot;</span>:<span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;header&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;è®¾è®¡é£æ ¼&quot;</span>, <span class="token string">&quot;multiSelect&quot;</span><span class="token builtin class-name">:</span> false, <span class="token string">&quot;options&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;description&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;ç®€çº¦çº¿æ¡å’Œç°ä»£è‰²å½©ï¼Œé€‚åˆæ—¥å¸¸ä½¿ç”¨&quot;</span>, <span class="token string">&quot;label&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;ç®€çº¦ç°ä»£é£&quot;</span><span class="token punctuation">}</span>, <span class="token punctuation">{</span><span class="token string">&quot;description&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;ä¼ ç»Ÿæ°´å¢¨ç”»é£æ ¼ï¼Œå±•ç°å›½æ½®éŸµå‘³&quot;</span>, <span class="token string">&quot;label&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;å›½æ½®æ°´å¢¨é£&quot;</span><span class="token punctuation">}</span>, <span class="token punctuation">{</span><span class="token string">&quot;description&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;å¯çˆ±çš„å¡é€šå½¢è±¡ï¼Œæ´»æ³¼æœ‰è¶£&quot;</span>, <span class="token string">&quot;label&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;å¯çˆ±å¡é€šé£&quot;</span><span class="token punctuation">}</span>, <span class="token punctuation">{</span><span class="token string">&quot;description&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;é‡‘è‰²ä¸ºä¸»ï¼Œé…ä»¥ä¼ ç»Ÿçº¹æ ·ï¼Œæ˜¾å¾—é«˜çº§&quot;</span>, <span class="token string">&quot;label&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;é‡‘è‰²å¥¢åé£&quot;</span><span class="token punctuation">}</span><span class="token punctuation">]</span>, <span class="token string">&quot;question&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;ä½ å¸Œæœ›çº¢åŒ…å°é¢çš„è®¾è®¡é£æ ¼æ˜¯ä»€ä¹ˆæ ·çš„ï¼Ÿ&quot;</span><span class="token punctuation">}</span>, <span class="token punctuation">{</span><span class="token string">&quot;header&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;ä½¿ç”¨åœºæ™¯&quot;</span>, <span class="token string">&quot;multiSelect&quot;</span><span class="token builtin class-name">:</span> true, <span class="token string">&quot;options&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;description&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;æ–°å¹´ã€æ˜¥èŠ‚ç­‰ä¼ ç»ŸèŠ‚æ—¥&quot;</span>, <span class="token string">&quot;label&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;ä¼ ç»ŸèŠ‚æ—¥&quot;</span><span class="token punctuation">}</span>, <span class="token punctuation">{</span><span class="token string">&quot;description&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;å©šç¤¼ã€ç”Ÿæ—¥ã€åº†å…¸ç­‰å–œåº†åœºåˆ&quot;</span>, <span class="token string">&quot;label&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;å–œåº†åœºåˆ&quot;</span><span class="token punctuation">}</span>, <span class="token punctuation">{</span><span class="token string">&quot;description&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;æ—¥å¸¸é€ç¤¼ã€æœ‹å‹é—´äº’åŠ¨&quot;</span>, <span class="token string">&quot;label&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;æ—¥å¸¸äº’åŠ¨&quot;</span><span class="token punctuation">}</span>, <span class="token punctuation">{</span><span class="token string">&quot;description&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;å•†åŠ¡åœºåˆã€å®¢æˆ·å…³ç³»ç»´æŠ¤&quot;</span>, <span class="token string">&quot;label&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;å•†åŠ¡åœºåˆ&quot;</span><span class="token punctuation">}</span><span class="token punctuation">]</span>, <span class="token string">&quot;question&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;è¿™ä¸ªçº¢åŒ…å°é¢ä¸»è¦ä¼šåœ¨ä»€ä¹ˆåœºåˆä½¿ç”¨ï¼Ÿ&quot;</span><span class="token punctuation">}</span>, <span class="token punctuation">{</span><span class="token string">&quot;header&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;é¢œè‰²åå¥½&quot;</span>, <span class="token string">&quot;multiSelect&quot;</span><span class="token builtin class-name">:</span> false, <span class="token string">&quot;options&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;description&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;çº¢è‰²ä¸ºä¸»ï¼Œé…é‡‘è‰²æˆ–ç™½è‰²&quot;</span>, <span class="token string">&quot;label&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;çº¢é‡‘é…è‰²&quot;</span><span class="token punctuation">}</span>, <span class="token punctuation">{</span><span class="token string">&quot;description&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;è“è‰²ä¸ºä¸»ï¼Œé…é‡‘è‰²æˆ–ç™½è‰²&quot;</span>, <span class="token string">&quot;label&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;è“é‡‘é…è‰²&quot;</span><span class="token punctuation">}</span>, <span class="token punctuation">{</span><span class="token string">&quot;description&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;çº¯è‰²èƒŒæ™¯ï¼Œç®€æ´å¤§æ–¹&quot;</span>, <span class="token string">&quot;label&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;å•è‰²èƒŒæ™¯&quot;</span><span class="token punctuation">}</span>, <span class="token punctuation">{</span><span class="token string">&quot;description&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;æ ¹æ®é”¦é²¤è‡ªç„¶è‰²å½©æ­é…&quot;</span>, <span class="token string">&quot;label&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;è‡ªç„¶è‰²å½©&quot;</span><span class="token punctuation">}</span><span class="token punctuation">]</span>, <span class="token string">&quot;question&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;ä½ æ›´å€¾å‘äºä»€ä¹ˆé¢œè‰²æ­é…ï¼Ÿ&quot;</span><span class="token punctuation">}</span>, <span class="token punctuation">{</span><span class="token string">&quot;header&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;æ–‡å­—å†…å®¹&quot;</span>, <span class="token string">&quot;multiSelect&quot;</span><span class="token builtin class-name">:</span> false, <span class="token string">&quot;options&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;description&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;åªæ”¾é”¦é²¤å›¾æ¡ˆï¼Œç®€æ´å¤§æ–¹&quot;</span>, <span class="token string">&quot;label&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;çº¯å›¾æ¡ˆ&quot;</span><span class="token punctuation">}</span>, <span class="token punctuation">{</span><span class="token string">&quot;description&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;é”¦é²¤å›¾æ¡ˆ+ç®€å•ç¥ç¦è¯­&quot;</span>, <span class="token string">&quot;label&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;å›¾æ¡ˆ+ç¥ç¦è¯­&quot;</span><span class="token punctuation">}</span>, <span class="token punctuation">{</span><span class="token string">&quot;description&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;é”¦é²¤å›¾æ¡ˆ+å“ç‰Œæˆ–å…¬å¸ä¿¡æ¯&quot;</span>, <span class="token string">&quot;label&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;å›¾æ¡ˆ+æ–‡å­—&quot;</span><span class="token punctuation">}</span><span class="token punctuation">]</span>, <span class="token string">&quot;question&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;çº¢åŒ…å°é¢æ˜¯å¦éœ€è¦æ·»åŠ æ–‡å­—å†…å®¹ï¼Ÿ&quot;</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
 - TEXT: æˆ‘æ¥å¸®ä½ è®¾è®¡é”¦é²¤ä¸»é¢˜çš„å¾®ä¿¡çº¢åŒ…å°é¢ï¼ä¸ºäº†ç»™ä½ æä¾›æ›´ç¬¦åˆéœ€æ±‚çš„è®¾è®¡æ–¹æ¡ˆï¼Œæˆ‘éœ€è¦äº†è§£ä¸€äº›å…·ä½“ä¿¡æ¯ã€‚

è®¾è®¡é£æ ¼: ä½ å¸Œæœ›çº¢åŒ…å°é¢çš„è®¾è®¡é£æ ¼æ˜¯ä»€ä¹ˆæ ·çš„ï¼Ÿ
  <span class="token number">1</span>. ç®€çº¦ç°ä»£é£ - ç®€çº¦çº¿æ¡å’Œç°ä»£è‰²å½©ï¼Œé€‚åˆæ—¥å¸¸ä½¿ç”¨
  <span class="token number">2</span>. å›½æ½®æ°´å¢¨é£ - ä¼ ç»Ÿæ°´å¢¨ç”»é£æ ¼ï¼Œå±•ç°å›½æ½®éŸµå‘³
  <span class="token number">3</span>. å¯çˆ±å¡é€šé£ - å¯çˆ±çš„å¡é€šå½¢è±¡ï¼Œæ´»æ³¼æœ‰è¶£
  <span class="token number">4</span>. é‡‘è‰²å¥¢åé£ - é‡‘è‰²ä¸ºä¸»ï¼Œé…ä»¥ä¼ ç»Ÿçº¹æ ·ï¼Œæ˜¾å¾—é«˜çº§
  <span class="token punctuation">(</span>Enter a number, or <span class="token builtin class-name">type</span> custom text<span class="token punctuation">)</span>
<span class="token number">1</span>

ä½¿ç”¨åœºæ™¯: è¿™ä¸ªçº¢åŒ…å°é¢ä¸»è¦ä¼šåœ¨ä»€ä¹ˆåœºåˆä½¿ç”¨ï¼Ÿ
  <span class="token number">1</span>. ä¼ ç»ŸèŠ‚æ—¥ - æ–°å¹´ã€æ˜¥èŠ‚ç­‰ä¼ ç»ŸèŠ‚æ—¥
  <span class="token number">2</span>. å–œåº†åœºåˆ - å©šç¤¼ã€ç”Ÿæ—¥ã€åº†å…¸ç­‰å–œåº†åœºåˆ
  <span class="token number">3</span>. æ—¥å¸¸äº’åŠ¨ - æ—¥å¸¸é€ç¤¼ã€æœ‹å‹é—´äº’åŠ¨
  <span class="token number">4</span>. å•†åŠ¡åœºåˆ - å•†åŠ¡åœºåˆã€å®¢æˆ·å…³ç³»ç»´æŠ¤
  <span class="token punctuation">(</span>Enter numbers separated by commas, or <span class="token builtin class-name">type</span> custom text<span class="token punctuation">)</span>
<span class="token number">1</span>

é¢œè‰²åå¥½: ä½ æ›´å€¾å‘äºä»€ä¹ˆé¢œè‰²æ­é…ï¼Ÿ
  <span class="token number">1</span>. çº¢é‡‘é…è‰² - çº¢è‰²ä¸ºä¸»ï¼Œé…é‡‘è‰²æˆ–ç™½è‰²
  <span class="token number">2</span>. è“é‡‘é…è‰² - è“è‰²ä¸ºä¸»ï¼Œé…é‡‘è‰²æˆ–ç™½è‰²
  <span class="token number">3</span>. å•è‰²èƒŒæ™¯ - çº¯è‰²èƒŒæ™¯ï¼Œç®€æ´å¤§æ–¹
  <span class="token number">4</span>. è‡ªç„¶è‰²å½© - æ ¹æ®é”¦é²¤è‡ªç„¶è‰²å½©æ­é…
  <span class="token punctuation">(</span>Enter a number, or <span class="token builtin class-name">type</span> custom text<span class="token punctuation">)</span>
<span class="token number">1</span>

æ–‡å­—å†…å®¹: çº¢åŒ…å°é¢æ˜¯å¦éœ€è¦æ·»åŠ æ–‡å­—å†…å®¹ï¼Ÿ
  <span class="token number">1</span>. çº¯å›¾æ¡ˆ - åªæ”¾é”¦é²¤å›¾æ¡ˆï¼Œç®€æ´å¤§æ–¹
  <span class="token number">2</span>. å›¾æ¡ˆ+ç¥ç¦è¯­ - é”¦é²¤å›¾æ¡ˆ+ç®€å•ç¥ç¦è¯­
  <span class="token number">3</span>. å›¾æ¡ˆ+æ–‡å­— - é”¦é²¤å›¾æ¡ˆ+å“ç‰Œæˆ–å…¬å¸ä¿¡æ¯
  <span class="token punctuation">(</span>Enter a number, or <span class="token builtin class-name">type</span> custom text<span class="token punctuation">)</span>
<span class="token number">2</span>
<span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">=</span> ç¬¬ <span class="token number">2</span> è½® <span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span>
before: 
<span class="token environment constant">USER</span><span class="token builtin class-name">:</span> 
 - SYSTEM: 
 - TOOLS: <span class="token punctuation">[</span><span class="token string">&quot;AskUserQuestionTool&quot;</span><span class="token punctuation">]</span>
 - TOOL-RESPONSE: AskUserQuestionTool: <span class="token string">&quot;User has answered your questions: {<span class="token entity" title="\\&quot;">\\&quot;</span>è¿™ä¸ªçº¢åŒ…å°é¢ä¸»è¦ä¼šåœ¨ä»€ä¹ˆåœºåˆä½¿ç”¨ï¼Ÿ<span class="token entity" title="\\&quot;">\\&quot;</span>:<span class="token entity" title="\\&quot;">\\&quot;</span>ä¼ ç»ŸèŠ‚æ—¥<span class="token entity" title="\\&quot;">\\&quot;</span>,<span class="token entity" title="\\&quot;">\\&quot;</span>ä½ å¸Œæœ›çº¢åŒ…å°é¢çš„è®¾è®¡é£æ ¼æ˜¯ä»€ä¹ˆæ ·çš„ï¼Ÿ<span class="token entity" title="\\&quot;">\\&quot;</span>:<span class="token entity" title="\\&quot;">\\&quot;</span>ç®€çº¦ç°ä»£é£<span class="token entity" title="\\&quot;">\\&quot;</span>,<span class="token entity" title="\\&quot;">\\&quot;</span>ä½ æ›´å€¾å‘äºä»€ä¹ˆé¢œè‰²æ­é…ï¼Ÿ<span class="token entity" title="\\&quot;">\\&quot;</span>:<span class="token entity" title="\\&quot;">\\&quot;</span>çº¢é‡‘é…è‰²<span class="token entity" title="\\&quot;">\\&quot;</span>,<span class="token entity" title="\\&quot;">\\&quot;</span>çº¢åŒ…å°é¢æ˜¯å¦éœ€è¦æ·»åŠ æ–‡å­—å†…å®¹ï¼Ÿ<span class="token entity" title="\\&quot;">\\&quot;</span>:<span class="token entity" title="\\&quot;">\\&quot;</span>å›¾æ¡ˆ+ç¥ç¦è¯­<span class="token entity" title="\\&quot;">\\&quot;</span>}&quot;</span>
after: 
ASSISTANT: 
 - TEXT: æ ¹æ®æ‚¨çš„éœ€æ±‚ï¼Œæˆ‘ä¸ºæ‚¨è®¾è®¡äº†ä¸€ä¸ª**ç®€çº¦ç°ä»£é£ã€çº¢é‡‘é…è‰²çš„é”¦é²¤ä¸»é¢˜å¾®ä¿¡çº¢åŒ…å°é¢**ï¼Œéå¸¸é€‚åˆä¼ ç»ŸèŠ‚æ—¥ä½¿ç”¨ã€‚

<span class="token comment">## ğŸ¨ è®¾è®¡æ–¹æ¡ˆè¯¦æƒ…</span>

<span class="token comment">### ğŸ“ å°ºå¯¸è§„æ ¼</span>
- **ä¸»å°ºå¯¸**: <span class="token number">1080</span>Ã—1920åƒç´ ï¼ˆç¬¦åˆå¾®ä¿¡çº¢åŒ…å°é¢æ ‡å‡†ï¼‰
- **å®‰å…¨åŒºåŸŸ**: ä¸Šä¸‹å·¦å³å„ç•™å‡º100pxï¼Œç¡®ä¿é‡è¦å†…å®¹ä¸è¢«é®æŒ¡

<span class="token comment">### ğŸ¯ è®¾è®¡å…ƒç´ </span>
<span class="token number">1</span>. **èƒŒæ™¯**: 
   - ä½¿ç”¨æ¸å˜çº¢è‰²èƒŒæ™¯ï¼ˆä»æ·±çº¢åˆ°æµ…çº¢ï¼‰ï¼Œè¥é€ èŠ‚æ—¥æ°›å›´
   - æ·»åŠ å¾®å¦™çš„é‡‘è‰²ç½‘æ ¼çº¹ç†ï¼Œå¢åŠ ç°ä»£æ„Ÿ

<span class="token number">2</span>. **é”¦é²¤å›¾æ¡ˆ**:
   - é€‰ç”¨ç®€çº¦çº¿æ¡é£æ ¼çš„é”¦é²¤å‰ªå½±
   - é”¦é²¤å‘ˆå‘ä¸Šæ¸¸åŠ¨å§¿æ€ï¼Œå¯“æ„<span class="token string">&quot;é±¼è·ƒé¾™é—¨&quot;</span>
   - é‡‘è‰²çº¿æ¡å‹¾å‹’ï¼Œä¸çº¢è‰²èƒŒæ™¯å½¢æˆå¯¹æ¯”

<span class="token number">3</span>. **æ–‡å­—å†…å®¹**:
   - **ä¸»æ ‡é¢˜**: <span class="token string">&quot;ç¦æ»¡é”¦é²¤&quot;</span>ï¼ˆé‡‘è‰²ç«‹ä½“æ•ˆæœï¼‰
   - **ç¥ç¦è¯­**: <span class="token string">&quot;å¹´å¹´æœ‰ä½™ï¼Œç¦è¿ç»µé•¿&quot;</span>
   - **è£…é¥°å…ƒç´ **: æ°´æ³¢çº¹ã€ç¥¥äº‘ç­‰ä¼ ç»Ÿå…ƒç´ ç‚¹ç¼€

<span class="token number">4</span>. **å“ç‰Œä¿¡æ¯**ï¼ˆå¯é€‰ï¼‰:
   - åº•éƒ¨å°å­—ï¼š<span class="token string">&quot;[æ‚¨çš„å“ç‰Œ/å§“å]ç¥æ‚¨æ–°å¹´å¿«ä¹&quot;</span>

<span class="token comment">### ğŸŒˆ è‰²å½©æ–¹æ¡ˆ</span>
- **ä¸»è‰²**: <span class="token comment">#D32F2Fï¼ˆæ·±çº¢ï¼‰â†’ #FFEB3Bï¼ˆé‡‘è‰²æ¸å˜ï¼‰</span>
- **è¾…åŠ©è‰²**: <span class="token comment">#FFF8E1ï¼ˆæµ…ç±³è‰²ï¼Œç”¨äºæ–‡å­—èƒŒæ™¯ï¼‰</span>

<span class="token comment">### âœ¨ è®¾è®¡äº®ç‚¹</span>
- ç®€çº¦ç°ä»£çš„çº¿æ¡é£æ ¼ï¼Œé¿å…è¿‡äºç¹å¤
- çº¢é‡‘é…è‰²ç»å…¸å¤§æ°”ï¼Œç¬¦åˆä¼ ç»ŸèŠ‚æ—¥æ°›å›´
- é”¦é²¤å‘ä¸Šæ¸¸åŠ¨çš„å§¿æ€ï¼Œå¯“æ„ç§¯æå‘ä¸Š
- èŠ‚å¥æ„Ÿçš„å¸ƒå±€ï¼Œè§†è§‰å¹³è¡¡åè°ƒ

<span class="token comment">### ğŸ“ ä½¿ç”¨å»ºè®®</span>
- é€‚åˆæ˜¥èŠ‚ã€å…ƒå®µèŠ‚ã€ä¸­ç§‹ç­‰ä¼ ç»ŸèŠ‚æ—¥å‘é€
- å¯ç”¨äºäº²å‹ç¥ç¦ã€å•†åŠ¡æ‹œå¹´ã€å®¢æˆ·ç­”è°¢ç­‰åœºåˆ
- çº¢é‡‘é…è‰²æ—¢æœ‰ä¼ ç»ŸéŸµå‘³ï¼Œåˆä¸å¤±ç°ä»£æ„Ÿ

è¿™ä¸ªè®¾è®¡æ–¹æ¡ˆæ—¢ä¿æŒäº†ä¼ ç»ŸèŠ‚æ—¥çš„å–œåº†æ°›å›´ï¼Œåˆç¬¦åˆç°ä»£å®¡ç¾ï¼Œç›¸ä¿¡ä¼šæ˜¯ä¸€ä¸ªå¾ˆå—æ¬¢è¿çš„çº¢åŒ…å°é¢ï¼æ‚¨è§‰å¾—è¿™ä¸ªè®¾è®¡æ–¹æ¡ˆå¦‚ä½•ï¼Ÿå¦‚æœéœ€è¦è°ƒæ•´ä»»ä½•ç»†èŠ‚ï¼Œè¯·å‘Šè¯‰æˆ‘ã€‚

$-<span class="token operator">&gt;</span>ASSISTANT: æ ¹æ®æ‚¨çš„éœ€æ±‚ï¼Œæˆ‘ä¸ºæ‚¨è®¾è®¡äº†ä¸€ä¸ª**ç®€çº¦ç°ä»£é£ã€çº¢é‡‘é…è‰²çš„é”¦é²¤ä¸»é¢˜å¾®ä¿¡çº¢åŒ…å°é¢**ï¼Œéå¸¸é€‚åˆä¼ ç»ŸèŠ‚æ—¥ä½¿ç”¨ã€‚

<span class="token comment">## ğŸ¨ è®¾è®¡æ–¹æ¡ˆè¯¦æƒ…</span>

<span class="token comment">### ğŸ“ å°ºå¯¸è§„æ ¼</span>
- **ä¸»å°ºå¯¸**: <span class="token number">1080</span>Ã—1920åƒç´ ï¼ˆç¬¦åˆå¾®ä¿¡çº¢åŒ…å°é¢æ ‡å‡†ï¼‰
- **å®‰å…¨åŒºåŸŸ**: ä¸Šä¸‹å·¦å³å„ç•™å‡º100pxï¼Œç¡®ä¿é‡è¦å†…å®¹ä¸è¢«é®æŒ¡

<span class="token comment">### ğŸ¯ è®¾è®¡å…ƒç´ </span>
<span class="token number">1</span>. **èƒŒæ™¯**: 
   - ä½¿ç”¨æ¸å˜çº¢è‰²èƒŒæ™¯ï¼ˆä»æ·±çº¢åˆ°æµ…çº¢ï¼‰ï¼Œè¥é€ èŠ‚æ—¥æ°›å›´
   - æ·»åŠ å¾®å¦™çš„é‡‘è‰²ç½‘æ ¼çº¹ç†ï¼Œå¢åŠ ç°ä»£æ„Ÿ

<span class="token number">2</span>. **é”¦é²¤å›¾æ¡ˆ**:
   - é€‰ç”¨ç®€çº¦çº¿æ¡é£æ ¼çš„é”¦é²¤å‰ªå½±
   - é”¦é²¤å‘ˆå‘ä¸Šæ¸¸åŠ¨å§¿æ€ï¼Œå¯“æ„<span class="token string">&quot;é±¼è·ƒé¾™é—¨&quot;</span>
   - é‡‘è‰²çº¿æ¡å‹¾å‹’ï¼Œä¸çº¢è‰²èƒŒæ™¯å½¢æˆå¯¹æ¯”

<span class="token number">3</span>. **æ–‡å­—å†…å®¹**:
   - **ä¸»æ ‡é¢˜**: <span class="token string">&quot;ç¦æ»¡é”¦é²¤&quot;</span>ï¼ˆé‡‘è‰²ç«‹ä½“æ•ˆæœï¼‰
   - **ç¥ç¦è¯­**: <span class="token string">&quot;å¹´å¹´æœ‰ä½™ï¼Œç¦è¿ç»µé•¿&quot;</span>
   - **è£…é¥°å…ƒç´ **: æ°´æ³¢çº¹ã€ç¥¥äº‘ç­‰ä¼ ç»Ÿå…ƒç´ ç‚¹ç¼€

<span class="token number">4</span>. **å“ç‰Œä¿¡æ¯**ï¼ˆå¯é€‰ï¼‰:
   - åº•éƒ¨å°å­—ï¼š<span class="token string">&quot;[æ‚¨çš„å“ç‰Œ/å§“å]ç¥æ‚¨æ–°å¹´å¿«ä¹&quot;</span>

<span class="token comment">### ğŸŒˆ è‰²å½©æ–¹æ¡ˆ</span>
- **ä¸»è‰²**: <span class="token comment">#D32F2Fï¼ˆæ·±çº¢ï¼‰â†’ #FFEB3Bï¼ˆé‡‘è‰²æ¸å˜ï¼‰</span>
- **è¾…åŠ©è‰²**: <span class="token comment">#FFF8E1ï¼ˆæµ…ç±³è‰²ï¼Œç”¨äºæ–‡å­—èƒŒæ™¯ï¼‰</span>

<span class="token comment">### âœ¨ è®¾è®¡äº®ç‚¹</span>
- ç®€çº¦ç°ä»£çš„çº¿æ¡é£æ ¼ï¼Œé¿å…è¿‡äºç¹å¤
- çº¢é‡‘é…è‰²ç»å…¸å¤§æ°”ï¼Œç¬¦åˆä¼ ç»ŸèŠ‚æ—¥æ°›å›´
- é”¦é²¤å‘ä¸Šæ¸¸åŠ¨çš„å§¿æ€ï¼Œå¯“æ„ç§¯æå‘ä¸Š
- èŠ‚å¥æ„Ÿçš„å¸ƒå±€ï¼Œè§†è§‰å¹³è¡¡åè°ƒ

<span class="token comment">### ğŸ“ ä½¿ç”¨å»ºè®®</span>
- é€‚åˆæ˜¥èŠ‚ã€å…ƒå®µèŠ‚ã€ä¸­ç§‹ç­‰ä¼ ç»ŸèŠ‚æ—¥å‘é€
- å¯ç”¨äºäº²å‹ç¥ç¦ã€å•†åŠ¡æ‹œå¹´ã€å®¢æˆ·ç­”è°¢ç­‰åœºåˆ
- çº¢é‡‘é…è‰²æ—¢æœ‰ä¼ ç»ŸéŸµå‘³ï¼Œåˆä¸å¤±ç°ä»£æ„Ÿ

è¿™ä¸ªè®¾è®¡æ–¹æ¡ˆæ—¢ä¿æŒäº†ä¼ ç»ŸèŠ‚æ—¥çš„å–œåº†æ°›å›´ï¼Œåˆç¬¦åˆç°ä»£å®¡ç¾ï¼Œç›¸ä¿¡ä¼šæ˜¯ä¸€ä¸ªå¾ˆå—æ¬¢è¿çš„çº¢åŒ…å°é¢ï¼æ‚¨è§‰å¾—è¿™ä¸ªè®¾è®¡æ–¹æ¡ˆå¦‚ä½•ï¼Ÿå¦‚æœéœ€è¦è°ƒæ•´ä»»ä½•ç»†èŠ‚ï¼Œè¯·å‘Šè¯‰æˆ‘ã€‚
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æˆ‘ä»¬å¯ä»¥å°†è¿™ä¸ªæ–¹æ¡ˆï¼Œæ‹¿æ¥ç”Ÿæˆå›¾ç‰‡ï¼Œæ¯”å¦‚ä¸‹é¢æ˜¯è±†åŒ…ã€åƒé—®ã€å…ƒå®ç­‰ä¸åŒå¹³å°çš„ç”Ÿæˆæ•ˆæœ</p><table><thead><tr><th>æ¨¡å‹</th><th>æ•ˆæœå›¾</th></tr></thead><tbody><tr><td>è±†åŒ…</td><td><img src="`+c+'" alt="è±†åŒ…æ•ˆæœå›¾" loading="lazy"></td></tr><tr><td>å…ƒå®</td><td><img src="'+n+'" alt="å…ƒå®æ•ˆæœå›¾" loading="lazy"></td></tr><tr><td>åƒé—®</td><td><img src="'+n+'" alt="åƒé—®æ•ˆæœå›¾" loading="lazy"></td></tr><tr><td>ç™¾åº¦</td><td><img src="'+l+'" alt="ç™¾åº¦æ•ˆæœå›¾" loading="lazy"></td></tr><tr><td>ChatGPT</td><td><img src="'+i+'" alt="ChatGPTæ•ˆæœå›¾" loading="lazy"></td></tr></tbody></table><h2 id="å››ã€å°ç»“" tabindex="-1"><a class="header-anchor" href="#å››ã€å°ç»“" aria-hidden="true">#</a> å››ã€å°ç»“</h2><p>æœ¬ç‰‡å†…å®¹é€šè¿‡è®¾è®¡+å®ä¾‹ç»™å¤§å®¶æ¼”ç¤ºäº†ä¸€ä¸‹Spring AIä¸­çš„å¤šè½®å¯¹è¯è‰ºæœ¯ï¼Œå¦‚ä½•è®©å¤§æ¨¡å‹ä¸»åŠ¨æé—®è·å–æ˜ç¡®éœ€æ±‚ï¼Ÿ ä¸‹é¢å‡ éƒ¨å³å¯ï¼š</p><ul><li>ä¸»åŠ¨è¯¢é—®æœºåˆ¶ï¼šä½¿ç”¨AskUserQuestionToolè®©AIåœ¨ä¿¡æ¯ä¸è¶³æ—¶ä¸»åŠ¨æé—®</li><li>çµæ´»çš„å“åº”å¤„ç†ï¼šé€šè¿‡è‡ªå®šä¹‰QuestionHandleré€‚é…ä¸åŒå¹³å°çš„äº¤äº’æ–¹å¼</li><li>å¯¹è¯çŠ¶æ€ç®¡ç†ï¼šåˆ©ç”¨MessageChatMemoryAdvisorç»´æŠ¤å¤šè½®å¯¹è¯çš„ä¸Šä¸‹æ–‡</li><li>å·¥å…·ç»„åˆä½¿ç”¨ï¼šå°†è¯¢é—®å·¥å…·ä¸è®°å¿†é¡¾é—®ã€æ—¥å¿—é¡¾é—®ç­‰é…åˆä½¿ç”¨ï¼Œæ„å»ºå®Œæ•´çš„äº¤äº’ä½“ç³»</li><li>å¼‚æ­¥å¤„ç†æ”¯æŒï¼šåœ¨Webç¯å¢ƒä¸­ä½¿ç”¨SSEå®ç°æµç•…çš„å¤šè½®å¯¹è¯ä½“éªŒ</li></ul>',64),r=[k];function d(v,m){return a(),t("div",null,r)}const g=s(u,[["render",d],["__file","A07.SpringAIæ™ºèƒ½ä½“æ¨¡å¼ï¼šå“åº”å‰å…ˆé—®è¯¢æœºåˆ¶.html.vue"]]);export{g as default};
