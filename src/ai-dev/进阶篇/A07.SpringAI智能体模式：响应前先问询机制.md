---
order: 7
title: 07.SpringAIæ™ºèƒ½ä½“æ¨¡å¼ï¼šè®©å¤§æ¨¡å‹ä¸»åŠ¨æé—®è·å–æ˜ç¡®éœ€æ±‚
tag:
  - Spring
  - SpringAI
category:
  - SpringAI
date: 2026-01-27 11:15:07
keywords: SpringAI Agent Skills
---

# Spring AIä¸­çš„å¤šè½®å¯¹è¯è‰ºæœ¯ï¼šè®©å¤§æ¨¡å‹ä¸»åŠ¨æé—®è·å–æ˜ç¡®éœ€æ±‚

åœ¨æ—¥å¸¸æˆ‘ä»¬ä¸å¤§æ¨¡å‹äº¤äº’çš„è¿‡ç¨‹ä¸­ï¼Œé€šå¸¸æ˜¯æˆ‘è¾“å…¥ä¸€ä¸ªé—®é¢˜æˆ–è€…åœºæ™¯è¦æ±‚ï¼Œç„¶åå¤§æ¨¡å‹åŸºäºæˆ‘ç»™å‡ºçš„ä¿¡æ¯è¿›è¡Œç”Ÿæˆå†…å®¹ã€‚è¿™ç§æ–¹å¼å¾ˆå®¹æ˜“å‡ºç°ä¸€ä¸ªç­”éæ‰€é—®çš„åœºæ™¯ï¼ˆå¥½åƒå¤§æ¨¡å‹å¹¶ä¸èƒ½æ€»æ˜¯å›ç­”åˆ°æˆ‘çš„å¿ƒè¶´ä¸ŠğŸ¤£ï¼‰

é‚£ä¹ˆæœ‰ä»€ä¹ˆå¥½çš„è§£å†³åŠæ³•å—ï¼Ÿ

ç†Ÿç»ƒè°ƒæ•™å¤§æ¨¡å‹çš„å°ä¼™ä¼´ï¼Œå¯èƒ½æ—©å°±æœ‰è‡ªå·±çš„ä¸€å¥—æ ‡å‡†æµç¨‹äº† -- é€šè¿‡å¤šæ¬¡ä¸å¤§æ¨¡å‹ä¹‹é—´çš„å¤šæ¬¡é—®è¯¢å›ç­”ï¼Œè®©å¤§æ¨¡å‹èƒ½æ›´æ¸…æ™°çš„çŸ¥é“è‡ªå·±çš„è¯‰æ±‚

é‚£ä¹ˆå¦‚ä½•è®©AIä¸»åŠ¨é—®è¯¢ç”¨æˆ·æ¥è·å–æ›´ç²¾ç¡®çš„ä¿¡æ¯å‘¢ï¼Ÿå¦‚æœæˆ‘å¼€å‘çš„å¤§æ¨¡å‹åº”ç”¨ï¼Œå¸Œæœ›é›†æˆè¿™æ ·çš„èƒ½åŠ›ï¼Œåˆå¯ä»¥æ€ä¹ˆå®ç°å‘¢ï¼Ÿ

æ¥ä¸‹æ¥æˆ‘ä»¬çœ‹çœ‹ï¼ŒSpringAIä¸­ï¼Œå¦‚ä½•é€šè¿‡å·§å¦™çš„å¤šè½®å¯¹è¯è‰ºæœ¯ï¼Œæ¥å®ç°è®©å¤§æ¨¡å‹ä¸»åŠ¨æé—®è·å–æ˜ç¡®éœ€æ±‚

## ä¸€ã€æ–¹æ¡ˆè®¾è®¡

### 1.1 æ ¸å¿ƒé—®é¢˜

åœ¨æˆ‘ä»¬è¿™ä¸ªåœºæ™¯ä¸­ï¼Œæ ¸å¿ƒçš„é—®é¢˜ç‚¹åœ¨äº **å¦‚ä½•è®©å¤§æ¨¡å‹åœ¨é¢å¯¹æ¨¡ç³Šéœ€æ±‚æ—¶ï¼Œèƒ½å¤Ÿä¸»åŠ¨å‘èµ·è¯¢é—®ï¼Œè·å–æ›´è¯¦ç»†çš„ä¿¡æ¯ï¼Œä»è€Œæä¾›æ›´ç²¾å‡†çš„å“åº”ã€‚**

å¸¸è§çš„å®ç°ä¸­ï¼Œå­˜åœ¨çš„é—®é¢˜å¦‚ä¸‹ï¼š

- å•æ¬¡äº¤äº’è¯•å›¾è§£å†³å¤æ‚é—®é¢˜
- å¯¹æ¨¡ç³Šè¾“å…¥ä¸åšå¤„ç†ç›´æ¥å“åº”
- ç¼ºå°‘å¤šè½®å¯¹è¯çš„çŠ¶æ€ç®¡ç†

è¿™äº›é—®é¢˜çš„æ ¹æœ¬åŸå› åœ¨äºæ²¡æœ‰å»ºç«‹èµ·AIä¸ç”¨æˆ·ä¹‹é—´çš„æœ‰æ•ˆåé¦ˆå¾ªç¯ï¼Œå¯¼è‡´å¤§æ¨¡å‹æ— æ³•è·å–è¶³å¤Ÿçš„ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼Œä½†æ˜¯å¯¹äºå¤§æ¨¡å‹è€Œè¨€ï¼Œå“åº”å†…å®¹æ˜¯å¯¹å®ƒçš„ä¸€ä¸ªéå¸¸é‡è¦çš„è€ƒé‡æŒ‡æ ‡ï¼Œæ‰€ä»¥å°±å¾ˆå®¹å‡ºç°å¤§æ¨¡å‹`è¯è¯´å…«é“` `ç­”éæ‰€é—®`ç­‰å¹»è§‰é‚£é—®é¢˜

### 1.2 ä¸»åŠ¨é—®è¯¢è®¾è®¡

> å¥½çš„è®¾è®¡åº”è¯¥ä¸»åŠ¨é€‚åº”ç”¨æˆ·ï¼Œè€Œä¸æ˜¯è®©ç”¨æˆ·é€‚åº”è®¾è®¡ã€‚

å¾ˆå¤šäººè®¤ä¸ºå¤§æ¨¡å‹åªèƒ½è¢«åŠ¨æ¥æ”¶è¾“å…¥ï¼Œå®é™…ä¸Š `Spring AI` æä¾›äº† `AskUserQuestionTool` è¿™ä¸ªå¼ºå¤§çš„å·¥å…·ï¼Œè®©AIèƒ½å¤Ÿä¸»åŠ¨å‘ç”¨æˆ·æå‡ºé—®é¢˜ã€‚

å®ƒæ˜¯é€šè¿‡ä»€ä¹ˆå®ç°çš„å‘¢ï¼Ÿ


![äº¤äº’æ¼”ç¤º](/imgs/column/springai/A07-.0webp)


- é€šè¿‡Function Callbackæ¥å®ç°ï¼Œå°†`AskUserQuestionTool`æ³¨å†Œä¸ºå¤§æ¨¡å‹å¯å›è°ƒä½¿ç”¨çš„å·¥å…·ï¼Œé€šè¿‡è¿™ä¸ªå·¥å…·æ¥å®ç°å¤šè½®é—®è¯¢åº”ç­”

ä¸‹é¢æ˜¯è¿™ä¸ªå·¥å…·çš„æ ¸å¿ƒå®šä¹‰:

```java

public class AskUserQuestionTool {
    @Tool(
        name = "AskUserQuestionTool",
        description = "Use this tool when you need to ask the user questions during execution. This allows you to:\n1. Gather user preferences or requirements\n2. Clarify ambiguous instructions\n3. Get decisions on implementation choices as you work\n4. Offer choices to the user about what direction to take.\n\nUsage notes:\n- Users will always be able to select \"Other\" to provide custom text input\n- Use multiSelect: true to allow multiple answers to be selected for a question\n- If you recommend a specific option, make that the first option in the list and add \"(Recommended)\" at the end of the label\n"
    )
    public String askUserQuestion(@ToolParam(description = "Questions to ask the user (1-4 questions)") List<Question> questions, @ToolParam(description = "User answers collected by the permission component",required = false) Map<String, String> answers) {
        this.validateQuestions(questions);
        // çœç•¥...
    }
}
```

é‡ç‚¹çœ‹ä¸€ä¸‹è¿™ä¸ªå·¥å…·çš„æè¿°ï¼Œå°†å…¶ç¿»è¯‘æˆä¸­æ–‡ï¼Œå†…å®¹å¦‚ä¸‹

```txt
åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­éœ€è¦å‘ç”¨æˆ·æé—®æ—¶ï¼Œè¯·ä½¿ç”¨æ­¤å·¥å…·ã€‚è¿™ä½¿æ‚¨èƒ½å¤Ÿï¼š
1. æ”¶é›†ç”¨æˆ·åå¥½æˆ–éœ€æ±‚
2. æ˜ç¡®å«ç³Šä¸æ¸…çš„æŒ‡ä»¤
3. åœ¨å·¥ä½œä¸­å°±å®æ–½é€‰æ‹©åšå‡ºå†³ç­–
4. å‘ç”¨æˆ·æä¾›é€‰æ‹©ï¼Œè®©ä»–ä»¬å†³å®šè¦é‡‡å–çš„æ–¹å‘ã€‚

ä½¿ç”¨é¡»çŸ¥ï¼š
- ç”¨æˆ·å§‹ç»ˆå¯ä»¥é€‰æ‹©â€œå…¶ä»–â€æ¥æä¾›è‡ªå®šä¹‰æ–‡æœ¬è¾“å…¥
- ä½¿ç”¨multiSelect: trueï¼Œå…è®¸ä¸€ä¸ªé—®é¢˜æœ‰å¤šä¸ªç­”æ¡ˆé€‰é¡¹
- å¦‚æœä½ æ¨èäº†ä¸€ä¸ªç‰¹å®šé€‰é¡¹ï¼Œè¯·å°†å…¶ä½œä¸ºåˆ—è¡¨ä¸­çš„ç¬¬ä¸€ä¸ªé€‰é¡¹ï¼Œå¹¶åœ¨æ ‡ç­¾æœ«å°¾åŠ ä¸Šâ€œï¼ˆæ¨èï¼‰â€
```

åœ¨è¿™ä¸ªå·¥å…·ç±»ä¸­ï¼Œé€šè¿‡å·§å¦™çš„è®¾è®¡ï¼Œå‘Šè¯‰å¤§æ¨¡å‹åœ¨å…·ä½“å“åº”ä¹‹å‰ï¼Œå¯ä»¥å…ˆè¿›è¡Œç”¨æˆ·é—®è¯¢

- å¤§æ¨¡å‹å°†éœ€è¦é—®è¯¢çš„å†…å®¹ï¼Œè½¬æ¢ä¸ºç»“æ„åŒ–çš„ `List<Question>`
- é€šè¿‡è®¾è®¡ä¸€ä¸ª`QuestionHandler`æ¥å¤„ç†å…·ä½“çš„ç”¨æˆ·é—®ç­”äº¤äº’æµç¨‹ï¼Œé€šè¿‡è´£ä»»åˆ†ç¦»çš„è®¾è®¡æ€æƒ³ï¼ŒAIè´Ÿè´£å†³å®šä½•æ—¶æé—®ï¼Œå…·ä½“çš„UIäº¤äº’ç”±å¼€å‘è€…è‡ªå®šä¹‰ã€‚ä½ å¯ä»¥å°†å…¶é€‚é…åˆ°Webç•Œé¢ã€ç§»åŠ¨ç«¯æˆ–ä»»ä½•å…¶ä»–å¹³å°ã€‚

å› æ­¤å…·ä½“çš„é—®è¯¢åº”ç­”æ–¹å¼ï¼Œå®Œå…¨æ˜¯ç”±åº”ç”¨æ–¹ï¼ˆå³å¼€å‘è€…ï¼‰æ¥æ§åˆ¶çš„


æ¥ä¸‹æ¥æˆ‘ä»¬è¿›å…¥å®æˆ˜æ¼”ç»ƒï¼Œçœ‹çœ‹å¦‚ä½•å®ç°è¿™æ ·çš„ä¸€ä¸ªå¤šè½®é—®è¯¢

## äºŒã€é¡¹ç›®åˆ›å»º

### 2.1 åŸºç¡€ç¯å¢ƒè¦æ±‚

è¦ä½“éªŒSpringAIçš„é—®è¯¢æœºåˆ¶ï¼Œç›®å‰éœ€è¦å‡çº§åˆ°SpringAI 2.xç‰ˆæœ¬ï¼ŒåŒæ—¶æˆ‘ä»¬çš„SpringBootä¹Ÿå¯ä»¥å‡çº§åˆ°4.x

- SpringAI: 2.0.0-M2
- SpringBoot: 4.0.1
- JDK21/17ï¼šè¿™ä¸¤ç‰ˆæœ¬éƒ½å¯ä»¥

é™¤äº†è¿™å‡ ä¸ªåŸºæœ¬ä¾èµ–ä¹‹å¤–ï¼Œæˆ‘ä»¬å¯ä»¥é€‰æ‹©ä¸€ä¸ªæ”¯æŒFunction Toolçš„å¤§æ¨¡å‹æ¥ä½œä¸ºè¿™ä¸ªå®ç°çš„å¤§è„‘ä¸­æ¢


æˆ‘ä»¬è¿™é‡Œé€‰æ‹©æ™ºè°±çš„å¤§æ¨¡å‹`GLM-4.5-Flash` ï¼ˆåŸå› å°±æ˜¯å› ä¸ºå®ƒå…è´¹ï¼Œä¸”æ•ˆæœè¿˜è¡Œï¼Œå¯¹æ‰€æœ‰æƒ³ä½“éªŒçš„å°ä¼™ä¼´æ²¡æœ‰ä»»ä½•é¢å¤–æˆæœ¬æŠ•å…¥ï¼‰

### 2.2 é¡¹ç›®åˆ›å»º

æ¥ä¸‹æ¥æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªSpringAIåº”ç”¨ï¼Œå¯¹äºä¸€ä¸ªæ ‡å‡†çš„SpringAIåº”ç”¨ï¼Œåœ¨`pom.xml`é…ç½®ä¸­ï¼Œä½ ä¼šçœ‹åˆ°ä¸‹é¢è¿™äº›åŸºç¡€ç‰ˆæœ¬æŒ‡å®šï¼Œè¿™ä¸ªä¹Ÿæ²¡ä»€ä¹ˆå¥½è¯´çš„


```xml
<parent>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-starter-parent</artifactId>
    <version>4.0.1</version>
    <relativePath /> 
</parent>
<properties>
    <maven.compiler.source>21</maven.compiler.source>
    <maven.compiler.target>21</maven.compiler.target>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
    <spring-ai.version>2.0.0-M2</spring-ai.version>
</properties>


<dependencyManagement>
    <dependencies>
        <dependency>
            <groupId>org.springframework.ai</groupId>
            <artifactId>spring-ai-bom</artifactId>
            <version>${spring-ai.version}</version>
            <type>pom</type>
            <scope>import</scope>
        </dependency>
    </dependencies>
</dependencyManagement>

<build>
    <plugins>
        <plugin>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-maven-plugin</artifactId>
        </plugin>
    </plugins>
</build>

<repositories>
    <repository>
        <id>spring-snapshots</id>
        <name>Spring Snapshots</name>
        <url>https://repo.spring.io/snapshot</url>
        <releases>
            <enabled>false</enabled>
        </releases>
    </repository>
    <repository>
        <name>Central Portal Snapshots</name>
        <id>central-portal-snapshots</id>
        <url>https://central.sonatype.com/repository/maven-snapshots/</url>
        <releases>
            <enabled>false</enabled>
        </releases>
        <snapshots>
            <enabled>true</enabled>
        </snapshots>
    </repository>
</repositories>
```

æ¥ä¸‹æ¥é‡ç‚¹çœ‹ä¸€ä¸‹æˆ‘ä»¬è¿™ä¸ªé¡¹ç›®æ‰€ç”¨åˆ°çš„å‡ ä¸ªæ ¸å¿ƒä¾èµ–

```xml
<dependencies>
    <dependency>
        <groupId>org.springaicommunity</groupId>
        <artifactId>spring-ai-agent-utils</artifactId>
        <version>0.4.1</version>
    </dependency>
    <dependency>
        <groupId>org.springframework.ai</groupId>
        <artifactId>spring-ai-starter-model-zhipuai</artifactId>
    </dependency>
</dependencies>
```

- spring-ai-agent-utils: è¿™ä¸ªå°±æ˜¯SpringAIè¿›è¡Œagentå¼€å‘çš„å…³é”®ä¾èµ–åŒ…
- spring-ai-starter-model-zhipuai: è¿™ä¸ªæ˜¯æ™ºè°±å¤§æ¨¡å‹è¿›è¡Œäº¤äº’çš„ä¾èµ–åŒ…

### 2.3 é¡¹ç›®é…ç½®

ä¾èµ–æå®šä¹‹åï¼Œæ¥ä¸‹æ¥å°±æ˜¯åœ¨é…ç½®æ–‡ä»¶ä¸­ï¼Œé…ç½®LLMè®¿é—®çš„ç›¸å…³ä¿¡æ¯ã€ä»¥åŠagentç›¸å…³é…ç½®å‚æ•°ï¼Œå¯¹åº”çš„é…ç½®æ–‡ä»¶ `resources/application.yml`

```yaml
spring:
  ai:
    zhipuai:
      # api-key ä½¿ç”¨ä½ è‡ªå·±ç”³è¯·çš„è¿›è¡Œæ›¿æ¢ï¼›å¦‚æœä¸ºäº†å®‰å…¨è€ƒè™‘ï¼Œå¯ä»¥é€šè¿‡å¯åŠ¨å‚æ•°è¿›è¡Œè®¾ç½®
      api-key: ${zhipuai-api-key}
      chat: # èŠå¤©æ¨¡å‹
        options:
          model: GLM-4.7-Flash
```

## ä¸‰ã€æ ¸å¿ƒå®ç°

æ¥ä¸‹æ¥æˆ‘ä»¬è¿›è¡Œå¿«é€Ÿä½“éªŒï¼Œé¦–å…ˆä¸ºäº†æ›´å¥½çš„è§‚å¯Ÿåº”ç”¨ä¸å¤§æ¨¡å‹ä¹‹é—´çš„äº¤äº’ï¼Œæˆ‘ä»¬å®ç°ä¸€ä¸ª`LoggingAdvisor`

### 3.1 äº¤äº’æ—¥å¿—æ‰“å°ï¼š MyLoggingAdvisor

> è¯´æ˜ï¼šè¿™ä¸ªå®ç°éå¿…éœ€ï¼Œä¸æ„Ÿå…´è¶£çš„ç›´æ¥è·³è¿‡

```java
public class MyLoggingAdvisor implements BaseAdvisor {
    private final int order;

    public final boolean showSystemMessage;

    public final boolean showAvailableTools;

    private AtomicInteger cnt = new AtomicInteger(1);

    private MyLoggingAdvisor(int order, boolean showSystemMessage, boolean showAvailableTools) {
        this.order = order;
        this.showSystemMessage = showSystemMessage;
        this.showAvailableTools = showAvailableTools;
    }

    @Override
    public int getOrder() {
        return this.order;
    }

    @Override
    public ChatClientRequest before(ChatClientRequest chatClientRequest, AdvisorChain advisorChain) {
        System.out.println("======================= ç¬¬ " + cnt.getAndAdd(1) + " è½® ====================================");

        StringBuilder sb = new StringBuilder("\nUSER: ");

        if (this.showSystemMessage && chatClientRequest.prompt().getSystemMessage() != null) {
            sb.append("\n - SYSTEM: ").append(first(chatClientRequest.prompt().getSystemMessage().getText(), 300));
        }

        if (this.showAvailableTools) {
            Object tools = "No Tools";

            if (chatClientRequest.prompt().getOptions() instanceof ToolCallingChatOptions toolOptions) {
                tools = toolOptions.getToolCallbacks().stream().map(tc -> tc.getToolDefinition().name()).toList();
            }

            sb.append("\n - TOOLS: ").append(ModelOptionsUtils.toJsonString(tools));
        }

        Message lastMessage = chatClientRequest.prompt().getLastUserOrToolResponseMessage();

        if (lastMessage.getMessageType() == MessageType.TOOL) {
            ToolResponseMessage toolResponseMessage = (ToolResponseMessage) lastMessage;
            for (var toolResponse : toolResponseMessage.getResponses()) {
                var tr = toolResponse.name() + ": " + first(toolResponse.responseData(), 1000);
                sb.append("\n - TOOL-RESPONSE: ").append(tr);
            }
        } else if (lastMessage.getMessageType() == MessageType.USER) {
            if (StringUtils.hasText(lastMessage.getText())) {
                sb.append("\n - TEXT: ").append(first(lastMessage.getText(), 1000));
            }
        }

        System.out.println("before: " + sb);
        return chatClientRequest;
    }

    @Override
    public ChatClientResponse after(ChatClientResponse chatClientResponse, AdvisorChain advisorChain) {
        StringBuilder sb = new StringBuilder("\nASSISTANT: ");

        if (chatClientResponse.chatResponse() == null || chatClientResponse.chatResponse().getResults() == null) {
            sb.append(" No chat response ");
            System.out.println("after: " + sb);
            return chatClientResponse;
        }

        for (var generation : chatClientResponse.chatResponse().getResults()) {
            var message = generation.getOutput();
            if (message.getToolCalls() != null) {
                for (var toolCall : message.getToolCalls()) {
                    sb.append("\n - TOOL-CALL: ")
                            .append(toolCall.name())
                            .append(" (")
                            .append(toolCall.arguments())
                            .append(")");
                }
            }

            if (message.getText() != null) {
                if (StringUtils.hasText(message.getText())) {
                    sb.append("\n - TEXT: ").append(first(message.getText(), 1200));
                }
            }
        }

        System.out.println("after: " + sb);
        return chatClientResponse;
    }

    private String first(String text, int n) {
        if (text.length() <= n) {
            return text;
        }
        return text.substring(0, n) + "...";
    }

    public static Builder builder() {
        return new Builder();
    }

    public static class Builder {

        private int order = 0;

        private boolean showSystemMessage = true;

        private boolean showAvailableTools = true;

        public Builder order(int order) {
            this.order = order;
            return this;
        }

        public Builder showSystemMessage(boolean showSystemMessage) {
            this.showSystemMessage = showSystemMessage;
            return this;
        }

        public Builder showAvailableTools(boolean showAvailableTools) {
            this.showAvailableTools = showAvailableTools;
            return this;
        }

        public MyLoggingAdvisor build() {
            MyLoggingAdvisor advisor = new MyLoggingAdvisor(this.order, this.showSystemMessage,
                    this.showAvailableTools);
            return advisor;
        }
    }

}
```

### 3.2 å‘½ä»¤è¡Œçš„é—®è¯¢åº”ç­”å®ç°ï¼šCommandLineQuestionHandler

åœ¨å‰é¢çš„è®¾è®¡ç¯‡ä¸­ä»‹ç»äº†`AskUserQuestionTool`ä¸­ï¼Œè®¾è®¡äº†ä¸€ä¸ªæ‰©å±•ç‚¹ `QuestionHandler` ç”±ä½¿ç”¨è€…æ¥å®ç°å…·ä½“çš„é—®ç­”äº¤äº’æ–¹æ¡ˆï¼Œå› æ­¤æˆ‘ä»¬å…ˆå®ç°ä¸€ä¸ªåŸºç¡€çš„åŸºäºå‘½ä»¤è¡Œçš„é—®ç­”

- `CommandLineQuestionHandler`ï¼šå®ç°`QuestionHandler`æ¥å£ï¼Œå¤„ç†ç”¨æˆ·é—®é¢˜åˆ—è¡¨
- `handle`æ–¹æ³•ï¼šéå†é—®é¢˜ï¼Œæ˜¾ç¤ºé€‰é¡¹ä¾›ç”¨æˆ·é€‰æ‹©ï¼Œæ”¯æŒå•é€‰/å¤šé€‰æ¨¡å¼
- `parseResponse`æ–¹æ³•ï¼šè§£æç”¨æˆ·è¾“å…¥ï¼Œå°†æ•°å­—ç¼–å·è½¬æ¢ä¸ºå¯¹åº”é€‰é¡¹æ ‡ç­¾ï¼Œæˆ–ç›´æ¥è¿”å›è‡ªå®šä¹‰æ–‡æœ¬ç­”æ¡ˆ

```java
/**
 * å‘½ä»¤è¡Œé—®é¢˜å¤„ç†å™¨ï¼Œå®ç° AskUserQuestionTool.QuestionHandler æ¥å£
 * ç”¨äºå¤„ç†AIå·¥å…·å‘ç”¨æˆ·æå‡ºçš„é—®é¢˜ï¼Œæ”¯æŒå•é€‰ã€å¤šé€‰å’Œè‡ªå®šä¹‰æ–‡æœ¬è¾“å…¥
 */
public class CommandLineQuestionHandler implements AskUserQuestionTool.QuestionHandler {

    /**
     * å¤„ç†ä¼ å…¥çš„é—®é¢˜åˆ—è¡¨ï¼Œé€ä¸ªæ˜¾ç¤ºé—®é¢˜å’Œé€‰é¡¹ï¼Œæ”¶é›†ç”¨æˆ·è¾“å…¥çš„ç­”æ¡ˆ
     *
     * @param questions éœ€è¦å¤„ç†çš„é—®é¢˜åˆ—è¡¨
     * @return åŒ…å«é—®é¢˜å’Œå¯¹åº”ç­”æ¡ˆçš„æ˜ å°„è¡¨
     */
    @Override
    public Map<String, String> handle(List<AskUserQuestionTool.Question> questions) {
        Map<String, String> answers = new HashMap<>();

        Scanner scanner = new Scanner(System.in);

        for (AskUserQuestionTool.Question q : questions) {
            // æ˜¾ç¤ºé—®é¢˜æ ‡é¢˜å’Œå†…å®¹
            System.out.println("\n" + q.header() + ": " + q.question());

            // è·å–å¹¶æ˜¾ç¤ºé€‰é¡¹
            List<AskUserQuestionTool.Question.Option> options = q.options();
            for (int i = 0; i < options.size(); i++) {
                AskUserQuestionTool.Question.Option opt = options.get(i);
                System.out.printf("  %d. %s - %s%n", i + 1, opt.label(), opt.description());
            }

            // æ ¹æ®æ˜¯å¦ä¸ºå¤šé€‰æ˜¾ç¤ºæç¤ºä¿¡æ¯
            if (q.multiSelect()) {
                System.out.println("  (Enter numbers separated by commas, or type custom text)");
            } else {
                System.out.println("  (Enter a number, or type custom text)");
            }

            // è¯»å–ç”¨æˆ·è¾“å…¥å¹¶è§£æç­”æ¡ˆ
            String response = scanner.nextLine().trim();
            answers.put(q.question(), parseResponse(response, options));
        }

        return answers;
    }

    /**
     * è§£æç”¨æˆ·è¾“å…¥çš„å“åº”ï¼Œæ ¹æ®é€‰é¡¹ç´¢å¼•æˆ–è‡ªå®šä¹‰æ–‡æœ¬è¿”å›å¯¹åº”çš„å€¼
     *
     * @param response ç”¨æˆ·è¾“å…¥çš„åŸå§‹å­—ç¬¦ä¸²
     * @param options  å¯ç”¨çš„é€‰é¡¹åˆ—è¡¨
     * @return è§£æåçš„ç­”æ¡ˆå­—ç¬¦ä¸²
     */
    private static String parseResponse(String response, List<AskUserQuestionTool.Question.Option> options) {
        try {
            // å°è¯•å°†è¾“å…¥è§£æä¸ºé€‰é¡¹ç¼–å·ï¼ˆæ”¯æŒå¤šä¸ªé€‰é¡¹ï¼‰
            String[] parts = response.split(",");
            List<String> labels = new ArrayList<>();
            for (String part : parts) {
                int index = Integer.parseInt(part.trim()) - 1;
                if (index >= 0 && index < options.size()) {
                    labels.add(options.get(index).label());
                }
            }
            // å¦‚æœæ²¡æœ‰æ‰¾åˆ°æœ‰æ•ˆçš„é€‰é¡¹ç¼–å·ï¼Œåˆ™è¿”å›åŸå§‹è¾“å…¥ï¼›å¦åˆ™è¿”å›é€‰é¡¹æ ‡ç­¾çš„ç»„åˆ
            return labels.isEmpty() ? response : String.join(", ", labels);
        } catch (NumberFormatException e) {
            // å¦‚æœè¾“å…¥ä¸æ˜¯æ•°å­—ï¼Œåˆ™å°†å…¶è§†ä¸ºè‡ªç”±æ–‡æœ¬
            return response;
        }
    }
}
```

### 3.3 é—®è¯¢å¯¹è¯å®ç°

åˆ›å»ºä¸€ä¸ªç®€æ˜“èŠå¤©å®¢æˆ·ç«¯ï¼Œé…ç½®äº†ä¸‰ä¸ªAdvisorï¼šå·¥å…·è°ƒç”¨é¡¾é—®ã€æ¶ˆæ¯è®°å¿†é¡¾é—®å’Œè‡ªå®šä¹‰æ—¥å¿—é¡¾é—®ï¼ˆéšè—å¯ç”¨å·¥å…·å’Œç³»ç»Ÿæ¶ˆæ¯ï¼‰ã€‚

ç„¶åå¯åŠ¨ä¸€ä¸ªå‘½ä»¤è¡Œå¾ªç¯ï¼Œç”¨æˆ·è¾“å…¥é—®é¢˜åé€šè¿‡èŠå¤©å®¢æˆ·ç«¯å¤„ç†å¹¶è¾“å‡ºAIåŠ©æ‰‹çš„å›ç­”


```java
@Bean
CommandLineRunner commandLineRunner(ChatClient.Builder chatClientBuilder) throws IOException {
    return args -> {
        // æ„å»ºChatClientå®ä¾‹ï¼Œé…ç½®æ‰€éœ€çš„å·¥å…·å’Œé¡¾é—®
        ChatClient chatClient = chatClientBuilder
                // è®¾ç½®é»˜è®¤å·¥å…·ï¼Œè¿™é‡Œä½¿ç”¨AskUserQuestionToolï¼Œå®ƒå…è®¸AIå‘ç”¨æˆ·æé—®
                .defaultTools(AskUserQuestionTool.builder()
                        // ä½¿ç”¨å‘½ä»¤è¡Œé—®é¢˜å¤„ç†å™¨æ¥å¤„ç†AIå‘ç”¨æˆ·æå‡ºçš„é—®é¢˜
                        .questionHandler(new CommandLineQuestionHandler())
                        .build())

                // é…ç½®é»˜è®¤çš„é¡¾é—®ï¼ˆæ‹¦æˆªå™¨ï¼‰ï¼ŒæŒ‰é¡ºåºæ‰§è¡Œ
                .defaultAdvisors(
                        // å·¥å…·è°ƒç”¨é¡¾é—®ï¼šå¤„ç†å·¥å…·è°ƒç”¨é€»è¾‘
                        ToolCallAdvisor.builder().conversationHistoryEnabled(false).build(),
                        
                        // æ¶ˆæ¯è®°å¿†é¡¾é—®ï¼šç»´æŠ¤å¯¹è¯å†å²ï¼Œä½¿ç”¨æ¶ˆæ¯çª—å£èŠå¤©è®°å¿†
                        // ä½äºå·¥å…·è°ƒç”¨é¡¾é—®ä¹‹åï¼Œä»¥ç¡®ä¿èƒ½å¤Ÿè®°ä½å·¥å…·è°ƒç”¨ç»“æœ
                        MessageChatMemoryAdvisor.builder(
                            MessageWindowChatMemory.builder()
                                .maxMessages(500)  // æœ€å¤šä¿å­˜500æ¡æ¶ˆæ¯
                                .build())
                        .build(),
                        
                        // è‡ªå®šä¹‰æ—¥å¿—é¡¾é—®ï¼šè®°å½•å¯¹è¯è¿‡ç¨‹ï¼Œå¯æ§åˆ¶æ˜¯å¦æ˜¾ç¤ºå¯ç”¨å·¥å…·å’Œç³»ç»Ÿæ¶ˆæ¯
                        MyLoggingAdvisor.builder()
                                .showAvailableTools(true)   // æ˜¾ç¤ºå¯ç”¨å·¥å…·åˆ—è¡¨
                                .showSystemMessage(true)    // æ˜¾ç¤ºç³»ç»Ÿæ¶ˆæ¯
                                .build())
                .build();

        // å¯åŠ¨èŠå¤©å¾ªç¯çš„æç¤ºä¿¡æ¯
        System.out.println("\nI am your assistant.\n");

        // ä½¿ç”¨try-with-resourcesç¡®ä¿Scannerèµ„æºå¾—åˆ°æ­£ç¡®é‡Šæ”¾
        try (Scanner scanner = new Scanner(System.in)) {
            // æ— é™å¾ªç¯ï¼ŒæŒç»­æ¥æ”¶ç”¨æˆ·è¾“å…¥å¹¶è¿”å›AIå›å¤
            while (true) {
                System.out.print("\n$->USER: ");  // æç¤ºç”¨æˆ·è¾“å…¥
                
                // è·å–ç”¨æˆ·è¾“å…¥ï¼Œé€šè¿‡chatClientå‘é€è¯·æ±‚ï¼ŒæŒ‡å®šå¯¹è¯IDï¼Œå¹¶è¾“å‡ºAIå›å¤
                System.out.println("\n$->ASSISTANT: " + 
                        chatClient.prompt(scanner.nextLine())  // å‘é€ç”¨æˆ·è¾“å…¥åˆ°AI
                                .advisors(a -> a.param(ChatMemory.CONVERSATION_ID, "113331"))  // è®¾ç½®å¯¹è¯IDä»¥ç»´æŠ¤ä¸Šä¸‹æ–‡
                                .call().content());  // æ‰§è¡Œè°ƒç”¨å¹¶è·å–AIå›å¤å†…å®¹
            }
        }
    };
}
```

### 3.4 æµ‹è¯•éªŒè¯

ç›´æ¥å¯åŠ¨é¡¹ç›®ï¼Œç„¶åå†æ§åˆ¶å°ä¸­è¾“å…¥æˆ‘çš„åŸå§‹è¯‰æ±‚

![äº¤äº’æ¼”ç¤º](/imgs/column/springai/A07-1.webp)


ä¸‹é¢æ˜¯å®Œæ•´çš„æ–‡å­—ç‰ˆæœ¬è¾“å‡ºå†…å®¹

```bash
I am your assistant.


$->USER: æˆ‘å‡†å¤‡è®¾è®¡ä¸€å¼ é”¦é²¤ä¸»é¢˜çš„å¾®ä¿¡çº¢åŒ…å°é¢
======================= ç¬¬ 1 è½® ====================================
before: 
USER: 
 - SYSTEM: 
 - TOOLS: ["AskUserQuestionTool"]
 - TEXT: æˆ‘å‡†å¤‡è®¾è®¡ä¸€å¼ é”¦é²¤ä¸»é¢˜çš„å¾®ä¿¡çº¢åŒ…å°é¢
after: 
ASSISTANT: 
 - TOOL-CALL: AskUserQuestionTool ({"questions":[{"header": "è®¾è®¡é£æ ¼", "multiSelect": false, "options": [{"description": "ç®€çº¦çº¿æ¡å’Œç°ä»£è‰²å½©ï¼Œé€‚åˆæ—¥å¸¸ä½¿ç”¨", "label": "ç®€çº¦ç°ä»£é£"}, {"description": "ä¼ ç»Ÿæ°´å¢¨ç”»é£æ ¼ï¼Œå±•ç°å›½æ½®éŸµå‘³", "label": "å›½æ½®æ°´å¢¨é£"}, {"description": "å¯çˆ±çš„å¡é€šå½¢è±¡ï¼Œæ´»æ³¼æœ‰è¶£", "label": "å¯çˆ±å¡é€šé£"}, {"description": "é‡‘è‰²ä¸ºä¸»ï¼Œé…ä»¥ä¼ ç»Ÿçº¹æ ·ï¼Œæ˜¾å¾—é«˜çº§", "label": "é‡‘è‰²å¥¢åé£"}], "question": "ä½ å¸Œæœ›çº¢åŒ…å°é¢çš„è®¾è®¡é£æ ¼æ˜¯ä»€ä¹ˆæ ·çš„ï¼Ÿ"}, {"header": "ä½¿ç”¨åœºæ™¯", "multiSelect": true, "options": [{"description": "æ–°å¹´ã€æ˜¥èŠ‚ç­‰ä¼ ç»ŸèŠ‚æ—¥", "label": "ä¼ ç»ŸèŠ‚æ—¥"}, {"description": "å©šç¤¼ã€ç”Ÿæ—¥ã€åº†å…¸ç­‰å–œåº†åœºåˆ", "label": "å–œåº†åœºåˆ"}, {"description": "æ—¥å¸¸é€ç¤¼ã€æœ‹å‹é—´äº’åŠ¨", "label": "æ—¥å¸¸äº’åŠ¨"}, {"description": "å•†åŠ¡åœºåˆã€å®¢æˆ·å…³ç³»ç»´æŠ¤", "label": "å•†åŠ¡åœºåˆ"}], "question": "è¿™ä¸ªçº¢åŒ…å°é¢ä¸»è¦ä¼šåœ¨ä»€ä¹ˆåœºåˆä½¿ç”¨ï¼Ÿ"}, {"header": "é¢œè‰²åå¥½", "multiSelect": false, "options": [{"description": "çº¢è‰²ä¸ºä¸»ï¼Œé…é‡‘è‰²æˆ–ç™½è‰²", "label": "çº¢é‡‘é…è‰²"}, {"description": "è“è‰²ä¸ºä¸»ï¼Œé…é‡‘è‰²æˆ–ç™½è‰²", "label": "è“é‡‘é…è‰²"}, {"description": "çº¯è‰²èƒŒæ™¯ï¼Œç®€æ´å¤§æ–¹", "label": "å•è‰²èƒŒæ™¯"}, {"description": "æ ¹æ®é”¦é²¤è‡ªç„¶è‰²å½©æ­é…", "label": "è‡ªç„¶è‰²å½©"}], "question": "ä½ æ›´å€¾å‘äºä»€ä¹ˆé¢œè‰²æ­é…ï¼Ÿ"}, {"header": "æ–‡å­—å†…å®¹", "multiSelect": false, "options": [{"description": "åªæ”¾é”¦é²¤å›¾æ¡ˆï¼Œç®€æ´å¤§æ–¹", "label": "çº¯å›¾æ¡ˆ"}, {"description": "é”¦é²¤å›¾æ¡ˆ+ç®€å•ç¥ç¦è¯­", "label": "å›¾æ¡ˆ+ç¥ç¦è¯­"}, {"description": "é”¦é²¤å›¾æ¡ˆ+å“ç‰Œæˆ–å…¬å¸ä¿¡æ¯", "label": "å›¾æ¡ˆ+æ–‡å­—"}], "question": "çº¢åŒ…å°é¢æ˜¯å¦éœ€è¦æ·»åŠ æ–‡å­—å†…å®¹ï¼Ÿ"}]})
 - TEXT: æˆ‘æ¥å¸®ä½ è®¾è®¡é”¦é²¤ä¸»é¢˜çš„å¾®ä¿¡çº¢åŒ…å°é¢ï¼ä¸ºäº†ç»™ä½ æä¾›æ›´ç¬¦åˆéœ€æ±‚çš„è®¾è®¡æ–¹æ¡ˆï¼Œæˆ‘éœ€è¦äº†è§£ä¸€äº›å…·ä½“ä¿¡æ¯ã€‚

è®¾è®¡é£æ ¼: ä½ å¸Œæœ›çº¢åŒ…å°é¢çš„è®¾è®¡é£æ ¼æ˜¯ä»€ä¹ˆæ ·çš„ï¼Ÿ
  1. ç®€çº¦ç°ä»£é£ - ç®€çº¦çº¿æ¡å’Œç°ä»£è‰²å½©ï¼Œé€‚åˆæ—¥å¸¸ä½¿ç”¨
  2. å›½æ½®æ°´å¢¨é£ - ä¼ ç»Ÿæ°´å¢¨ç”»é£æ ¼ï¼Œå±•ç°å›½æ½®éŸµå‘³
  3. å¯çˆ±å¡é€šé£ - å¯çˆ±çš„å¡é€šå½¢è±¡ï¼Œæ´»æ³¼æœ‰è¶£
  4. é‡‘è‰²å¥¢åé£ - é‡‘è‰²ä¸ºä¸»ï¼Œé…ä»¥ä¼ ç»Ÿçº¹æ ·ï¼Œæ˜¾å¾—é«˜çº§
  (Enter a number, or type custom text)
1

ä½¿ç”¨åœºæ™¯: è¿™ä¸ªçº¢åŒ…å°é¢ä¸»è¦ä¼šåœ¨ä»€ä¹ˆåœºåˆä½¿ç”¨ï¼Ÿ
  1. ä¼ ç»ŸèŠ‚æ—¥ - æ–°å¹´ã€æ˜¥èŠ‚ç­‰ä¼ ç»ŸèŠ‚æ—¥
  2. å–œåº†åœºåˆ - å©šç¤¼ã€ç”Ÿæ—¥ã€åº†å…¸ç­‰å–œåº†åœºåˆ
  3. æ—¥å¸¸äº’åŠ¨ - æ—¥å¸¸é€ç¤¼ã€æœ‹å‹é—´äº’åŠ¨
  4. å•†åŠ¡åœºåˆ - å•†åŠ¡åœºåˆã€å®¢æˆ·å…³ç³»ç»´æŠ¤
  (Enter numbers separated by commas, or type custom text)
1

é¢œè‰²åå¥½: ä½ æ›´å€¾å‘äºä»€ä¹ˆé¢œè‰²æ­é…ï¼Ÿ
  1. çº¢é‡‘é…è‰² - çº¢è‰²ä¸ºä¸»ï¼Œé…é‡‘è‰²æˆ–ç™½è‰²
  2. è“é‡‘é…è‰² - è“è‰²ä¸ºä¸»ï¼Œé…é‡‘è‰²æˆ–ç™½è‰²
  3. å•è‰²èƒŒæ™¯ - çº¯è‰²èƒŒæ™¯ï¼Œç®€æ´å¤§æ–¹
  4. è‡ªç„¶è‰²å½© - æ ¹æ®é”¦é²¤è‡ªç„¶è‰²å½©æ­é…
  (Enter a number, or type custom text)
1

æ–‡å­—å†…å®¹: çº¢åŒ…å°é¢æ˜¯å¦éœ€è¦æ·»åŠ æ–‡å­—å†…å®¹ï¼Ÿ
  1. çº¯å›¾æ¡ˆ - åªæ”¾é”¦é²¤å›¾æ¡ˆï¼Œç®€æ´å¤§æ–¹
  2. å›¾æ¡ˆ+ç¥ç¦è¯­ - é”¦é²¤å›¾æ¡ˆ+ç®€å•ç¥ç¦è¯­
  3. å›¾æ¡ˆ+æ–‡å­— - é”¦é²¤å›¾æ¡ˆ+å“ç‰Œæˆ–å…¬å¸ä¿¡æ¯
  (Enter a number, or type custom text)
2
======================= ç¬¬ 2 è½® ====================================
before: 
USER: 
 - SYSTEM: 
 - TOOLS: ["AskUserQuestionTool"]
 - TOOL-RESPONSE: AskUserQuestionTool: "User has answered your questions: {\"è¿™ä¸ªçº¢åŒ…å°é¢ä¸»è¦ä¼šåœ¨ä»€ä¹ˆåœºåˆä½¿ç”¨ï¼Ÿ\":\"ä¼ ç»ŸèŠ‚æ—¥\",\"ä½ å¸Œæœ›çº¢åŒ…å°é¢çš„è®¾è®¡é£æ ¼æ˜¯ä»€ä¹ˆæ ·çš„ï¼Ÿ\":\"ç®€çº¦ç°ä»£é£\",\"ä½ æ›´å€¾å‘äºä»€ä¹ˆé¢œè‰²æ­é…ï¼Ÿ\":\"çº¢é‡‘é…è‰²\",\"çº¢åŒ…å°é¢æ˜¯å¦éœ€è¦æ·»åŠ æ–‡å­—å†…å®¹ï¼Ÿ\":\"å›¾æ¡ˆ+ç¥ç¦è¯­\"}"
after: 
ASSISTANT: 
 - TEXT: æ ¹æ®æ‚¨çš„éœ€æ±‚ï¼Œæˆ‘ä¸ºæ‚¨è®¾è®¡äº†ä¸€ä¸ª**ç®€çº¦ç°ä»£é£ã€çº¢é‡‘é…è‰²çš„é”¦é²¤ä¸»é¢˜å¾®ä¿¡çº¢åŒ…å°é¢**ï¼Œéå¸¸é€‚åˆä¼ ç»ŸèŠ‚æ—¥ä½¿ç”¨ã€‚

## ğŸ¨ è®¾è®¡æ–¹æ¡ˆè¯¦æƒ…

### ğŸ“ å°ºå¯¸è§„æ ¼
- **ä¸»å°ºå¯¸**: 1080Ã—1920åƒç´ ï¼ˆç¬¦åˆå¾®ä¿¡çº¢åŒ…å°é¢æ ‡å‡†ï¼‰
- **å®‰å…¨åŒºåŸŸ**: ä¸Šä¸‹å·¦å³å„ç•™å‡º100pxï¼Œç¡®ä¿é‡è¦å†…å®¹ä¸è¢«é®æŒ¡

### ğŸ¯ è®¾è®¡å…ƒç´ 
1. **èƒŒæ™¯**: 
   - ä½¿ç”¨æ¸å˜çº¢è‰²èƒŒæ™¯ï¼ˆä»æ·±çº¢åˆ°æµ…çº¢ï¼‰ï¼Œè¥é€ èŠ‚æ—¥æ°›å›´
   - æ·»åŠ å¾®å¦™çš„é‡‘è‰²ç½‘æ ¼çº¹ç†ï¼Œå¢åŠ ç°ä»£æ„Ÿ

2. **é”¦é²¤å›¾æ¡ˆ**:
   - é€‰ç”¨ç®€çº¦çº¿æ¡é£æ ¼çš„é”¦é²¤å‰ªå½±
   - é”¦é²¤å‘ˆå‘ä¸Šæ¸¸åŠ¨å§¿æ€ï¼Œå¯“æ„"é±¼è·ƒé¾™é—¨"
   - é‡‘è‰²çº¿æ¡å‹¾å‹’ï¼Œä¸çº¢è‰²èƒŒæ™¯å½¢æˆå¯¹æ¯”

3. **æ–‡å­—å†…å®¹**:
   - **ä¸»æ ‡é¢˜**: "ç¦æ»¡é”¦é²¤"ï¼ˆé‡‘è‰²ç«‹ä½“æ•ˆæœï¼‰
   - **ç¥ç¦è¯­**: "å¹´å¹´æœ‰ä½™ï¼Œç¦è¿ç»µé•¿"
   - **è£…é¥°å…ƒç´ **: æ°´æ³¢çº¹ã€ç¥¥äº‘ç­‰ä¼ ç»Ÿå…ƒç´ ç‚¹ç¼€

4. **å“ç‰Œä¿¡æ¯**ï¼ˆå¯é€‰ï¼‰:
   - åº•éƒ¨å°å­—ï¼š"[æ‚¨çš„å“ç‰Œ/å§“å]ç¥æ‚¨æ–°å¹´å¿«ä¹"

### ğŸŒˆ è‰²å½©æ–¹æ¡ˆ
- **ä¸»è‰²**: #D32F2Fï¼ˆæ·±çº¢ï¼‰â†’ #FFEB3Bï¼ˆé‡‘è‰²æ¸å˜ï¼‰
- **è¾…åŠ©è‰²**: #FFF8E1ï¼ˆæµ…ç±³è‰²ï¼Œç”¨äºæ–‡å­—èƒŒæ™¯ï¼‰

### âœ¨ è®¾è®¡äº®ç‚¹
- ç®€çº¦ç°ä»£çš„çº¿æ¡é£æ ¼ï¼Œé¿å…è¿‡äºç¹å¤
- çº¢é‡‘é…è‰²ç»å…¸å¤§æ°”ï¼Œç¬¦åˆä¼ ç»ŸèŠ‚æ—¥æ°›å›´
- é”¦é²¤å‘ä¸Šæ¸¸åŠ¨çš„å§¿æ€ï¼Œå¯“æ„ç§¯æå‘ä¸Š
- èŠ‚å¥æ„Ÿçš„å¸ƒå±€ï¼Œè§†è§‰å¹³è¡¡åè°ƒ

### ğŸ“ ä½¿ç”¨å»ºè®®
- é€‚åˆæ˜¥èŠ‚ã€å…ƒå®µèŠ‚ã€ä¸­ç§‹ç­‰ä¼ ç»ŸèŠ‚æ—¥å‘é€
- å¯ç”¨äºäº²å‹ç¥ç¦ã€å•†åŠ¡æ‹œå¹´ã€å®¢æˆ·ç­”è°¢ç­‰åœºåˆ
- çº¢é‡‘é…è‰²æ—¢æœ‰ä¼ ç»ŸéŸµå‘³ï¼Œåˆä¸å¤±ç°ä»£æ„Ÿ

è¿™ä¸ªè®¾è®¡æ–¹æ¡ˆæ—¢ä¿æŒäº†ä¼ ç»ŸèŠ‚æ—¥çš„å–œåº†æ°›å›´ï¼Œåˆç¬¦åˆç°ä»£å®¡ç¾ï¼Œç›¸ä¿¡ä¼šæ˜¯ä¸€ä¸ªå¾ˆå—æ¬¢è¿çš„çº¢åŒ…å°é¢ï¼æ‚¨è§‰å¾—è¿™ä¸ªè®¾è®¡æ–¹æ¡ˆå¦‚ä½•ï¼Ÿå¦‚æœéœ€è¦è°ƒæ•´ä»»ä½•ç»†èŠ‚ï¼Œè¯·å‘Šè¯‰æˆ‘ã€‚

$->ASSISTANT: æ ¹æ®æ‚¨çš„éœ€æ±‚ï¼Œæˆ‘ä¸ºæ‚¨è®¾è®¡äº†ä¸€ä¸ª**ç®€çº¦ç°ä»£é£ã€çº¢é‡‘é…è‰²çš„é”¦é²¤ä¸»é¢˜å¾®ä¿¡çº¢åŒ…å°é¢**ï¼Œéå¸¸é€‚åˆä¼ ç»ŸèŠ‚æ—¥ä½¿ç”¨ã€‚

## ğŸ¨ è®¾è®¡æ–¹æ¡ˆè¯¦æƒ…

### ğŸ“ å°ºå¯¸è§„æ ¼
- **ä¸»å°ºå¯¸**: 1080Ã—1920åƒç´ ï¼ˆç¬¦åˆå¾®ä¿¡çº¢åŒ…å°é¢æ ‡å‡†ï¼‰
- **å®‰å…¨åŒºåŸŸ**: ä¸Šä¸‹å·¦å³å„ç•™å‡º100pxï¼Œç¡®ä¿é‡è¦å†…å®¹ä¸è¢«é®æŒ¡

### ğŸ¯ è®¾è®¡å…ƒç´ 
1. **èƒŒæ™¯**: 
   - ä½¿ç”¨æ¸å˜çº¢è‰²èƒŒæ™¯ï¼ˆä»æ·±çº¢åˆ°æµ…çº¢ï¼‰ï¼Œè¥é€ èŠ‚æ—¥æ°›å›´
   - æ·»åŠ å¾®å¦™çš„é‡‘è‰²ç½‘æ ¼çº¹ç†ï¼Œå¢åŠ ç°ä»£æ„Ÿ

2. **é”¦é²¤å›¾æ¡ˆ**:
   - é€‰ç”¨ç®€çº¦çº¿æ¡é£æ ¼çš„é”¦é²¤å‰ªå½±
   - é”¦é²¤å‘ˆå‘ä¸Šæ¸¸åŠ¨å§¿æ€ï¼Œå¯“æ„"é±¼è·ƒé¾™é—¨"
   - é‡‘è‰²çº¿æ¡å‹¾å‹’ï¼Œä¸çº¢è‰²èƒŒæ™¯å½¢æˆå¯¹æ¯”

3. **æ–‡å­—å†…å®¹**:
   - **ä¸»æ ‡é¢˜**: "ç¦æ»¡é”¦é²¤"ï¼ˆé‡‘è‰²ç«‹ä½“æ•ˆæœï¼‰
   - **ç¥ç¦è¯­**: "å¹´å¹´æœ‰ä½™ï¼Œç¦è¿ç»µé•¿"
   - **è£…é¥°å…ƒç´ **: æ°´æ³¢çº¹ã€ç¥¥äº‘ç­‰ä¼ ç»Ÿå…ƒç´ ç‚¹ç¼€

4. **å“ç‰Œä¿¡æ¯**ï¼ˆå¯é€‰ï¼‰:
   - åº•éƒ¨å°å­—ï¼š"[æ‚¨çš„å“ç‰Œ/å§“å]ç¥æ‚¨æ–°å¹´å¿«ä¹"

### ğŸŒˆ è‰²å½©æ–¹æ¡ˆ
- **ä¸»è‰²**: #D32F2Fï¼ˆæ·±çº¢ï¼‰â†’ #FFEB3Bï¼ˆé‡‘è‰²æ¸å˜ï¼‰
- **è¾…åŠ©è‰²**: #FFF8E1ï¼ˆæµ…ç±³è‰²ï¼Œç”¨äºæ–‡å­—èƒŒæ™¯ï¼‰

### âœ¨ è®¾è®¡äº®ç‚¹
- ç®€çº¦ç°ä»£çš„çº¿æ¡é£æ ¼ï¼Œé¿å…è¿‡äºç¹å¤
- çº¢é‡‘é…è‰²ç»å…¸å¤§æ°”ï¼Œç¬¦åˆä¼ ç»ŸèŠ‚æ—¥æ°›å›´
- é”¦é²¤å‘ä¸Šæ¸¸åŠ¨çš„å§¿æ€ï¼Œå¯“æ„ç§¯æå‘ä¸Š
- èŠ‚å¥æ„Ÿçš„å¸ƒå±€ï¼Œè§†è§‰å¹³è¡¡åè°ƒ

### ğŸ“ ä½¿ç”¨å»ºè®®
- é€‚åˆæ˜¥èŠ‚ã€å…ƒå®µèŠ‚ã€ä¸­ç§‹ç­‰ä¼ ç»ŸèŠ‚æ—¥å‘é€
- å¯ç”¨äºäº²å‹ç¥ç¦ã€å•†åŠ¡æ‹œå¹´ã€å®¢æˆ·ç­”è°¢ç­‰åœºåˆ
- çº¢é‡‘é…è‰²æ—¢æœ‰ä¼ ç»ŸéŸµå‘³ï¼Œåˆä¸å¤±ç°ä»£æ„Ÿ

è¿™ä¸ªè®¾è®¡æ–¹æ¡ˆæ—¢ä¿æŒäº†ä¼ ç»ŸèŠ‚æ—¥çš„å–œåº†æ°›å›´ï¼Œåˆç¬¦åˆç°ä»£å®¡ç¾ï¼Œç›¸ä¿¡ä¼šæ˜¯ä¸€ä¸ªå¾ˆå—æ¬¢è¿çš„çº¢åŒ…å°é¢ï¼æ‚¨è§‰å¾—è¿™ä¸ªè®¾è®¡æ–¹æ¡ˆå¦‚ä½•ï¼Ÿå¦‚æœéœ€è¦è°ƒæ•´ä»»ä½•ç»†èŠ‚ï¼Œè¯·å‘Šè¯‰æˆ‘ã€‚
```


æˆ‘ä»¬å¯ä»¥å°†è¿™ä¸ªæ–¹æ¡ˆï¼Œæ‹¿æ¥ç”Ÿæˆå›¾ç‰‡ï¼Œæ¯”å¦‚ä¸‹é¢æ˜¯è±†åŒ…ã€åƒé—®ã€å…ƒå®ç­‰ä¸åŒå¹³å°çš„ç”Ÿæˆæ•ˆæœ

| æ¨¡å‹ | æ•ˆæœå›¾ | 
| --- | --- | 
| è±†åŒ… |  ![è±†åŒ…æ•ˆæœå›¾](/imgs/column/springai/A07-doubao.webp) |
| å…ƒå® | ![å…ƒå®æ•ˆæœå›¾](/imgs/column/springai/A07-yuanbao.webp) |
| åƒé—® | ![åƒé—®æ•ˆæœå›¾](/imgs/column/springai/A07-yuanbao.webp) |
| ç™¾åº¦ | ![ç™¾åº¦æ•ˆæœå›¾](/imgs/column/springai/A07-baidu.webp) |
| ChatGPT | ![ChatGPTæ•ˆæœå›¾](/imgs/column/springai/A07-chatgpt.webp) |

## å››ã€å°ç»“

æœ¬æ–‡å†…å®¹é€šè¿‡è®¾è®¡+å®ä¾‹ç»™å¤§å®¶æ¼”ç¤ºäº†ä¸€ä¸‹Spring AIä¸­çš„å¤šè½®å¯¹è¯è‰ºæœ¯ï¼Œå¦‚ä½•è®©å¤§æ¨¡å‹ä¸»åŠ¨æé—®è·å–æ˜ç¡®éœ€æ±‚ï¼Ÿ ä¸‹é¢å‡ éƒ¨å³å¯ï¼š

- ä¸»åŠ¨è¯¢é—®æœºåˆ¶ï¼šä½¿ç”¨AskUserQuestionToolè®©AIåœ¨ä¿¡æ¯ä¸è¶³æ—¶ä¸»åŠ¨æé—®
- çµæ´»çš„å“åº”å¤„ç†ï¼šé€šè¿‡è‡ªå®šä¹‰QuestionHandleré€‚é…ä¸åŒå¹³å°çš„äº¤äº’æ–¹å¼
- å¯¹è¯çŠ¶æ€ç®¡ç†ï¼šåˆ©ç”¨MessageChatMemoryAdvisorç»´æŠ¤å¤šè½®å¯¹è¯çš„ä¸Šä¸‹æ–‡
- å·¥å…·ç»„åˆä½¿ç”¨ï¼šå°†è¯¢é—®å·¥å…·ä¸è®°å¿†é¡¾é—®ã€æ—¥å¿—é¡¾é—®ç­‰é…åˆä½¿ç”¨ï¼Œæ„å»ºå®Œæ•´çš„äº¤äº’ä½“ç³»
- å¼‚æ­¥å¤„ç†æ”¯æŒï¼šåœ¨Webç¯å¢ƒä¸­ä½¿ç”¨SSEå®ç°æµç•…çš„å¤šè½®å¯¹è¯ä½“éªŒ

